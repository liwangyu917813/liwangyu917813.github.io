<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¿ƒåŠ¨ç¬é—´ - æ¨¡æ‹Ÿæ‹çˆ±æ¸¸æˆ</title>
  <!-- å¤–éƒ¨èµ„æº -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- Tailwind é…ç½® -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#FF6B8B',
            secondary: '#8C52FF',
            accent: '#FF9F43',
            light: '#FFF2F9',
            dark: '#4A4A4A',
            love: '#FF3366'
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
          },
          animation: {
            'bounce-slow': 'bounce 3s infinite',
            'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'glow': 'glow 2s ease-in-out infinite alternate',
            'float': 'float 6s ease-in-out infinite',
            'shake': 'shake 0.5s ease-in-out'
          },
          keyframes: {
            glow: {
              '0%': { textShadow: '0 0 5px #fff, 0 0 10px #fff, 0 0 15px #FF6B8B, 0 0 20px #FF6B8B' },
              '100%': { textShadow: '0 0 10px #fff, 0 0 20px #fff, 0 0 30px #FF6B8B, 0 0 40px #FF6B8B' }
            },
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-10px)' }
            },
            shake: {
              '0%, 100%': { transform: 'translateX(0)' },
              '25%': { transform: 'translateX(-5px)' },
              '75%': { transform: 'translateX(5px)' }
            }
          }
        }
      }
    }
  </script>
  
  <!-- è‡ªå®šä¹‰å·¥å…·ç±» -->
  <style type="text/tailwindcss">
    @layer utilities {
      .text-shadow { text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); }
      .card-hover { @apply transition-all duration-300 hover:shadow-lg hover:-translate-y-1; }
      .btn-primary { @apply bg-primary text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50; }
      .btn-secondary { @apply bg-secondary text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-secondary focus:ring-opacity-50; }
      .btn-outline { @apply border border-primary text-primary px-4 py-2 rounded-lg hover:bg-primary hover:text-white transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-opacity-50; }
      .progress-bar { @apply h-2 rounded-full bg-gray-200 overflow-hidden; }
      .progress-value { @apply h-full bg-gradient-to-r from-primary to-secondary transition-all duration-500; }
      .dialog-box { @apply bg-white rounded-xl shadow-lg p-4 mb-4 max-w-lg mx-auto; }
      .character-card { @apply bg-white rounded-xl shadow-md overflow-hidden card-hover cursor-pointer; }
      .gift-card { @apply bg-white rounded-lg shadow p-3 card-hover cursor-pointer; }
      .job-card { @apply bg-white rounded-lg shadow p-3 card-hover cursor-pointer; }
      .blush-mode { @apply border-2 border-love animate-pulse-slow; }
      .harem-badge { @apply absolute top-2 right-2 bg-love text-white text-xs px-2 py-1 rounded-full; }
      .story-milestone { @apply bg-blue-50 border-l-4 border-blue-500 p-4 mb-3 rounded-r-lg; }
      .costume-card { @apply border-2 rounded-lg p-2 cursor-pointer transition-all hover:border-primary hover:bg-primary/5; }
      .costume-locked { @apply opacity-50 cursor-not-allowed relative; }
      .costume-locked::after {
        content: "ğŸ”’";
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 2rem;
      }
      .event-card { @apply bg-gradient-to-r from-purple-100 to-pink-100 border border-purple-200 rounded-lg p-4 mb-4; }
      .notification { @apply fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 ease-in-out opacity-0 translate-y-[-20px]; }
      .notification.show { @apply opacity-100 translate-y-0; }
      .character-status { @apply flex items-center justify-between mb-2 text-sm; }
      .status-bar { @apply w-full bg-gray-200 rounded-full h-2 mt-1; }
      .status-fill { @apply h-full rounded-full transition-all duration-500; }
    }
  </style>
</head>
<body class="bg-light min-h-screen font-sans text-dark">
  <!-- æ¸¸æˆå®¹å™¨ -->
  <div id="game-container" class="max-w-6xl mx-auto px-4 py-8">
    
    <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
    <header class="flex flex-col sm:flex-row justify-between items-center mb-8 gap-4">
      <div class="flex items-center">
        <h1 class="text-3xl font-bold text-primary mr-4">å¿ƒåŠ¨ç¬é—´</h1>
        <span class="bg-accent text-white text-sm px-3 py-1 rounded-full">æ¨¡æ‹Ÿæ‹çˆ±æ¸¸æˆ</span>
        <span id="week-indicator" class="ml-4 bg-secondary text-white text-sm px-3 py-1 rounded-full hidden">äºŒå‘¨ç›®</span>
      </div>
      <div class="flex items-center space-x-4">
        <button id="reset-btn" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 flex items-center">
          <i class="fa fa-refresh mr-2"></i> é‡ç½®æ¸¸æˆ
        </button>
        <div id="blush-mode-indicator" class="hidden bg-love text-white text-sm px-3 py-1 rounded-full flex items-center">
          <i class="fa fa-heart mr-1"></i> çº¢æ¶¦æ¨¡å¼
          <span id="blush-days" class="ml-1">3å¤©</span>
        </div>
        <div class="flex items-center">
          <i class="fa fa-money text-green-600 mr-1"></i>
          <span id="money-display" class="font-bold">500</span>
          <span class="text-sm">å…ƒ</span>
        </div>
        <div class="flex items-center">
          <i class="fa fa-calendar text-blue-600 mr-1"></i>
          <span id="day-display" class="font-bold">1</span>
          <span class="text-sm">å¤©</span>
        </div>
      </div>
    </header>
    
    <!-- ä¸»æ¸¸æˆåŒºåŸŸ -->
    <main>
      <!-- é¡µé¢å®¹å™¨ - æ‰€æœ‰é¡µé¢éƒ½åœ¨è¿™é‡Œåˆ‡æ¢ -->
      <div id="page-container">
        
        <!-- è§’è‰²é€‰æ‹©é¡µé¢ -->
        <section id="character-selection-page" class="page active">
          <h2 class="text-2xl font-bold mb-6 text-center">é€‰æ‹©ä½ å¿ƒä»ªçš„å¯¹è±¡</h2>
          
          <div id="harem-section" class="mb-8 hidden">
            <h3 class="text-xl font-bold mb-4">ä½ çš„åå®«</h3>
            <div id="harem-container" class="flex flex-wrap gap-4">
              <!-- åå®«è§’è‰²å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- è§’è‰²A -->
            <div class="character-card" data-character="0">
              <div class="relative">
                <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/51b69d279e4943028d5bbfc9e25ca362.jpeg~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=womRcKMGS7klMrjKmwsXdf78nZM%3D" 
                     alt="å•µå•µå§" class="w-full h-64 object-cover">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                  <h3 class="text-white text-xl font-bold">å•µå•µå§</h3>
                  <p class="text-white text-sm">çŸ¥æ€§å¾¡å§ Â· å›¾ä¹¦é¦†ç®¡ç†å‘˜</p>
                </div>
                <span class="harem-badge hidden" data-character="0">åå®«</span>
              </div>
              <div class="p-4">
                <p class="text-sm text-gray-600 mb-3">ä¼˜é›…çŸ¥æ€§ï¼Œçƒ­çˆ±é˜…è¯»ï¼Œéšè—ç€ä¸€æ®µå…³äºçè´µå¤ç±çš„ç§˜å¯†ã€‚</p>
                <div class="flex justify-end">
                  <button class="startæ”»ç•¥-btn btn-primary text-sm" data-character="0">å¼€å§‹æ”»ç•¥</button>
                </div>
              </div>
            </div>
            
            <!-- è§’è‰²B -->
            <div class="character-card" data-character="1">
              <div class="relative">
                <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/cd2d7d88c7ce4fb491c282aa359de240.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=lqt58sUJrMXZM7uE19AMAcVBHso%3D" 
                     alt="é¹å“¥" class="w-full h-64 object-cover">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                  <h3 class="text-white text-xl font-bold">é¹å“¥</h3>
                  <p class="text-white text-sm">ç¥ç§˜é…·å“¥ Â· ä½“è‚²æ•™ç»ƒ</p>
                </div>
                <span class="harem-badge hidden" data-character="1">åå®«</span>
              </div>
              <div class="p-4">
                <p class="text-sm text-gray-600 mb-3">æ²‰é»˜å¯¡è¨€ï¼Œèº«æ‰‹çŸ«å¥ï¼Œæ›¾æ˜¯ä¸“ä¸šè¿åŠ¨å‘˜ï¼Œå› ä¼¤é€€å½¹ã€‚</p>
                <div class="flex justify-end">
                  <button class="startæ”»ç•¥-btn btn-primary text-sm" data-character="1">å¼€å§‹æ”»ç•¥</button>
                </div>
              </div>
            </div>
            
            <!-- è§’è‰²C -->
            <div class="character-card" data-character="2">
              <div class="relative">
                <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/c6d542f684ce42f5ab91cd7d6ee64fde.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=O0OZgejwvXJhQguwKC5lRpNdgOo%3D" 
                     alt="é¦™æ³¢å“¥" class="w-full h-64 object-cover">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                  <h3 class="text-white text-xl font-bold">é¦™æ³¢å“¥</h3>
                  <p class="text-white text-sm">æˆç†Ÿç¨³é‡ Â· å…¬å¸æ€»è£</p>
                </div>
                <span class="harem-badge hidden" data-character="2">åå®«</span>
              </div>
              <div class="p-4">
                <p class="text-sm text-gray-600 mb-3">äº‹ä¸šæœ‰æˆï¼Œæ¸©æ–‡å°”é›…ï¼Œæ­£é¢ä¸´å®¶æ—ä¼ä¸šç»§æ‰¿çš„é‡å¤§æŠ‰æ‹©ã€‚</p>
                <div class="flex justify-end">
                  <button class="startæ”»ç•¥-btn btn-primary text-sm" data-character="2">å¼€å§‹æ”»ç•¥</button>
                </div>
              </div>
            </div>
            
            <!-- è§’è‰²D -->
            <div class="character-card" data-character="3">
              <div class="relative">
                <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/f62afbbe16204edfb46496c5c0f1ca55.jpeg~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=IIZ5v1w%2FhfBrw5l2ShG8V%2BwGrsA%3D" 
                     alt="æ™¶æ™¶å§" class="w-full h-64 object-cover">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                  <h3 class="text-white text-xl font-bold">æ™¶æ™¶å§</h3>
                  <p class="text-white text-sm">æ¸©æŸ”å¯çˆ± Â· ç”œç‚¹å¸ˆ</p>
                </div>
                <span class="harem-badge hidden" data-character="3">åå®«</span>
              </div>
              <div class="p-4">
                <p class="text-sm text-gray-600 mb-3">å¿ƒåœ°å–„è‰¯ï¼Œç¬‘å®¹ç”œç¾ï¼Œæ­£åœ¨å¯»æ‰¾å¤±æ•£å¤šå¹´çš„åŒèƒèƒå¦¹å¦¹ã€‚</p>
                <div class="flex justify-end">
                  <button class="startæ”»ç•¥-btn btn-primary text-sm" data-character="3">å¼€å§‹æ”»ç•¥</button>
                </div>
              </div>
            </div>
            
            <!-- è§’è‰²E -->
            <div class="character-card" data-character="4">
              <div class="relative">
                <img src="https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/0d90c2dd2c8a4da78ba023a3da191596.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=ylMfctaeAa4Vs5yPvVEkgKj0b8M%3D" 
                     alt="é£é£å“¥" class="w-full h-64 object-cover">
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                  <h3 class="text-white text-xl font-bold">é£é£å“¥</h3>
                  <p class="text-white text-sm">é˜³å…‰å¼€æœ— Â· éŸ³ä¹æ•™å¸ˆ</p>
                </div>
                <span class="harem-badge hidden" data-character="4">åå®«</span>
              </div>
              <div class="p-4">
                <p class="text-sm text-gray-600 mb-3">çƒ­æƒ…æ´‹æº¢ï¼Œå¤šæ‰å¤šè‰ºï¼Œæ¢¦æƒ³ä¸¾åŠä¸ªäººéŸ³ä¹ä¼šå´ç¼ºä¹è‡ªä¿¡ã€‚</p>
                <div class="flex justify-end">
                  <button class="startæ”»ç•¥-btn btn-primary text-sm" data-character="4">å¼€å§‹æ”»ç•¥</button>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- è§’è‰²äº’åŠ¨é¡µé¢ -->
        <section id="character-interaction-page" class="page hidden">
          <div class="flex flex-wrap justify-between items-center mb-6 gap-2">
            <button id="back-to-selection" class="btn-outline flex items-center">
              <i class="fa fa-arrow-left mr-2"></i> è¿”å›åˆ—è¡¨
            </button>
            <div class="flex flex-wrap space-x-2 gap-2">
              <button id="work-btn" class="btn-secondary flex items-center">
                <i class="fa fa-briefcase mr-2"></i> æ‰“å·¥
              </button>
              <button id="gift-btn" class="btn-primary flex items-center">
                <i class="fa fa-gift mr-2"></i> é€ç¤¼
              </button>
              <button id="date-btn" class="bg-accent text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-accent focus:ring-opacity-50 flex items-center">
                <i class="fa fa-heart mr-2"></i> çº¦ä¼š
              </button>
              <button id="costume-btn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-purple-600 focus:ring-opacity-50 flex items-center">
                <i class="fa fa-magic mr-2"></i> æ¢è£…
              </button>
              <button id="propose-btn" class="bg-love text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-love focus:ring-opacity-50 flex items-center hidden">
                <i class="fa fa-diamond mr-2"></i> æ±‚å©š
              </button>
              <button id="diary-btn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-opacity-50 flex items-center">
                <i class="fa fa-book mr-2"></i> æ—¥è®°
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- å·¦ä¾§ï¼šè§’è‰²ä¿¡æ¯ -->
            <div class="lg:col-span-1">
              <div id="character-card-wrapper" class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="relative">
                  <img id="character-detail-image" src="" alt="è§’è‰²è¯¦æƒ…" class="w-full h-64 object-cover">
                  <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                    <h3 id="character-detail-name" class="text-white text-xl font-bold">è§’è‰²åç§°</h3>
                    <p id="character-detail-title" class="text-white text-sm">è§’è‰²å¤´è¡”</p>
                  </div>
                  <span id="harem-indicator" class="harem-badge hidden">åå®«</span>
                </div>
                <div class="p-4">
                  <div class="mb-4">
                    <div class="flex justify-between mb-1">
                      <span class="text-sm font-medium">å¥½æ„Ÿåº¦</span>
                      <span id="affection-value" class="text-sm font-bold">0/100</span>
                    </div>
                    <div class="progress-bar">
                      <div id="affection-bar" class="progress-value" style="width: 0%"></div>
                    </div>
                  </div>
                  
                  <!-- è§’è‰²çŠ¶æ€ -->
                  <div class="mb-4">
                    <div class="character-status">
                      <span class="text-sm font-medium">å¿ƒæƒ…å€¼</span>
                      <span id="mood-value" class="text-sm">è‰¯å¥½</span>
                    </div>
                    <div class="status-bar">
                      <div id="mood-bar" class="status-fill bg-green-500" style="width: 70%"></div>
                    </div>
                  </div>
                  
                  <!-- æ•…äº‹é‡Œç¨‹ç¢‘ -->
                  <div class="mb-4">
                    <h4 class="font-bold text-sm mb-2">æ•…äº‹è¿›åº¦</h4>
                    <div id="story-milestones" class="space-y-2">
                      <div class="text-sm text-gray-500">æå‡å¥½æ„Ÿåº¦è§£é”æ•…äº‹å‰§æƒ…</div>
                    </div>
                  </div>
                  
                  <div class="mb-4">
                    <h4 class="font-bold text-sm mb-2">çº¿ç´¢</h4>
                    <div id="character-clues" class="flex flex-wrap gap-1">
                      <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">æš‚æ— çº¿ç´¢</span>
                    </div>
                  </div>
                  
                  <div>
                    <h4 class="font-bold text-sm mb-2">æ€§æ ¼</h4>
                    <p id="character-personality" class="text-sm text-gray-600">è§’è‰²æ€§æ ¼æè¿°</p>
                  </div>
                </div>
              </div>
              
              <!-- ä»Šæ—¥è¿åŠ¿ -->
              <div class="bg-white rounded-xl shadow-lg p-4 mt-6">
                <h4 class="font-bold text-sm mb-3">ä»Šæ—¥è¿åŠ¿</h4>
                <div id="daily-fortune" class="text-center">
                  <div class="text-2xl mb-2">ğŸŒŸ</div>
                  <p class="text-sm text-gray-600">ä»Šæ—¥é€‚åˆä¸å¿ƒä»ªå¯¹è±¡çº¦ä¼šï¼ŒæˆåŠŸç‡ä¼šå¤§å¤§æå‡ï¼</p>
                </div>
              </div>
            </div>
            
            <!-- å³ä¾§ï¼šäº’åŠ¨åŒºåŸŸ -->
            <div class="lg:col-span-2">
              <!-- å¯¹è¯åŒºåŸŸ -->
              <div id="dialog-section" class="bg-white rounded-xl shadow-lg p-6 mb-6">
                <h3 class="text-xl font-bold mb-4">å¯¹è¯</h3>
                
                <div id="dialog-container" class="h-80 overflow-y-auto mb-4 p-4 bg-gray-50 rounded-lg">
                  <!-- å¯¹è¯å†…å®¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
                
                <div id="dialog-options" class="grid grid-cols-1 md:grid-cols-2 gap-3">
                  <!-- å¯¹è¯é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
              </div>
              
              <!-- é€ç¤¼åŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="gift-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4">èµ é€ç¤¼ç‰©</h3>
                
                <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                  <!-- ç¤¼ç‰©å¡ç‰‡å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
              </div>
              
              <!-- æ‰“å·¥åŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="work-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4">æ‰“å·¥èµšé’±</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <!-- æ‰“å·¥é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
              </div>
              
              <!-- çº¦ä¼šåŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="date-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4">çº¦ä¼š</h3>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <!-- çº¦ä¼šé€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
              </div>
              
              <!-- æ¢è£…åŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="costume-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4">æ›´æ¢æœè£…</h3>
                
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="costume-container">
                  <!-- æœè£…é€‰é¡¹å°†é€šè¿‡JSåŠ¨æ€æ·»åŠ  -->
                </div>
              </div>
              
              <!-- æ±‚å©šåŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="propose-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4 text-love animate-glow">æ±‚å©š</h3>
                
                <div class="text-center p-6">
                  <p class="mb-6 text-lg">ä½ ç¡®å®šè¦å‘ <span id="propose-character-name" class="font-bold text-love"></span> æ±‚å©šå—ï¼Ÿ</p>
                  <div class="flex justify-center space-x-4">
                    <button id="accept-propose" class="btn-primary">
                      <i class="fa fa-heart mr-2"></i> ç¡®å®šæ±‚å©š
                    </button>
                    <button id="cancel-propose" class="btn-outline">
                      <i class="fa fa-times mr-2"></i> å–æ¶ˆ
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- æ—¥è®°åŒºåŸŸ (é»˜è®¤éšè—) -->
              <div id="diary-section" class="bg-white rounded-xl shadow-lg p-6 mb-6 hidden">
                <h3 class="text-xl font-bold mb-4">æ—¥è®°</h3>
                
                <div class="mb-4">
                  <h4 class="font-bold text-sm mb-2">çº¿ç´¢æ”¶é›†</h4>
                  <div id="diary-clues" class="p-4 bg-gray-50 rounded-lg min-h-[100px]">
                    <p class="text-gray-500">ä½ è¿˜æ²¡æœ‰æ”¶é›†åˆ°ä»»ä½•çº¿ç´¢...</p>
                  </div>
                </div>
                
                <div>
                  <h4 class="font-bold text-sm mb-2">äº’åŠ¨è®°å½•</h4>
                  <div id="diary-interactions" class="p-4 bg-gray-50 rounded-lg min-h-[200px]">
                    <p class="text-gray-500">ä½ è¿˜æ²¡æœ‰ä¸ä»»ä½•äººäº’åŠ¨...</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
        
        <!-- ç»“å±€é¡µé¢ -->
        <section id="ending-page" class="page hidden">
          <div class="bg-white rounded-xl shadow-lg p-8 max-w-2xl mx-auto">
            <h2 class="text-2xl font-bold mb-6 text-center">å‘Šç™½æˆåŠŸ</h2>
            
            <div class="mb-6 text-center">
              <img id="ending-image" src="" alt="ç»“å±€å›¾ç‰‡" class="w-64 h-64 object-cover rounded-full mx-auto mb-4 border-4 border-love">
              <h3 id="ending-title" class="text-xl font-bold text-love mb-2">åŠ å…¥åå®«</h3>
              <p id="ending-description" class="text-gray-600">æ­å–œï¼ä½ æˆåŠŸæ”»ç•¥äº†TAï¼Œç°åœ¨å¯ä»¥ç»§ç»­æ”»ç•¥å…¶ä»–è§’è‰²äº†ã€‚</p>
            </div>
            
            <div class="text-center">
              <button id="continue-game" class="btn-primary">ç»§ç»­æ¸¸æˆ</button>
            </div>
          </div>
        </section>
        
        <!-- é‡ç½®ç¡®è®¤é¡µé¢ -->
        <section id="reset-confirmation-page" class="page hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div class="bg-white rounded-xl shadow-lg p-6 max-w-md w-full">
            <h3 class="text-xl font-bold text-primary mb-4">é‡ç½®æ¸¸æˆ</h3>
            <p class="mb-6">ç¡®å®šè¦é‡ç½®æ¸¸æˆå—ï¼Ÿæ‰€æœ‰è¿›åº¦å°†ä¼šä¸¢å¤±ï¼ŒåŒ…æ‹¬åå®«æˆå‘˜å’Œé‡‘é’±ã€‚</p>
            <div class="flex justify-center space-x-4">
              <button id="confirm-reset" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-opacity-90 transition-all duration-300">
                <i class="fa fa-refresh mr-2"></i> ç¡®è®¤é‡ç½®
              </button>
              <button id="cancel-reset" class="btn-outline">
                <i class="fa fa-times mr-2"></i> å–æ¶ˆ
              </button>
            </div>
          </div>
        </section>
      </div>
    </main>
    
    <!-- é¡µè„š -->
    <footer class="mt-12 text-center text-sm text-gray-500">
      <p>å¿ƒåŠ¨ç¬é—´ &copy; 2025 æ¨¡æ‹Ÿæ‹çˆ±æ¸¸æˆ</p>
    </footer>
  </div>
  
  <!-- é€šçŸ¥å®¹å™¨ -->
  <div id="notification-container" class="fixed top-4 right-4 z-50 space-y-2">
    <!-- é€šçŸ¥å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
  </div>
  
  <!-- æ¸¸æˆé€»è¾‘ -->
  <script>
    // æ¸¸æˆæ•°æ®æ¨¡å‹ - ä¸ºæ¯ä¸ªè§’è‰²å¢åŠ ç‹¬ç‰¹çš„æ•…äº‹çº¿
    const gameData = {
      money: 500,
      day: 1,
      currentCharacter: null,
      clues: [],
      interactions: [],
      blushMode: { active: false, daysRemaining: 0, characterId: -1 },
      harem: [],
      week: 1,
      characters: [
        {
          id: 0,
          name: "å•µå•µå§",
          title: "çŸ¥æ€§å¾¡å§ Â· å›¾ä¹¦é¦†ç®¡ç†å‘˜",
          personality: "ä¼˜é›…çŸ¥æ€§ï¼Œçƒ­çˆ±é˜…è¯»ï¼Œéšè—ç€ä¸€æ®µå…³äºçè´µå¤ç±çš„ç§˜å¯†ã€‚",
          likes: ["ä¹¦ç±", "å’–å•¡", "éŸ³ä¹"],
          affection: 0,
          mood: 70,
          isHarem: false,
          currentCostume: 0,
          storyMilestones: [
            { affection: 10, title: "åˆè¯†å›¾ä¹¦é¦†", description: "å•µå•µå§å‘ä½ ä»‹ç»äº†å›¾ä¹¦é¦†çš„å†å²å’Œçè´µè—ä¹¦ã€‚" },
            { affection: 20, title: "å¤ç±ä¼ è¯´", description: "å¥¹å‘Šè¯‰ä½ å®¶æ—æµä¼ ç€ä¸€æœ¬è®°è½½ç€ç¥ç§˜çŸ¥è¯†çš„å¤ç±ã€‚" },
            { affection: 30, title: "å¯»æ‰¾çº¿ç´¢", description: "ä½ ä»¬åœ¨æ—§ä¹¦å †ä¸­å‘ç°äº†ä¸€å¼ æŒ‡å‘å¤ç±ä½ç½®çš„åœ°å›¾ç¢ç‰‡ã€‚" },
            { affection: 40, title: "å®¶æ—ç§˜é—»", description: "å•µå•µå§é€éœ²å¤ç±å¯èƒ½ä¸å¥¹å¤±è¸ªçš„ç¥–çˆ¶æœ‰å…³ã€‚" },
            { affection: 50, title: "ç¥ç§˜ç¬¦å·", description: "ä½ ä»¬å‘ç°å¤ç±ä¸­éšè—ç€ä¸€äº›å¥‡æ€ªçš„ç¬¦å·å’Œå¯†ç ã€‚" },
            { affection: 60, title: "çœŸç›¸åˆç°", description: "é€šè¿‡è§£è¯»ç¬¦å·ï¼Œä½ ä»¬å‘ç°å¤ç±è®°å½•ç€ä¸€ä¸ªæƒŠäººçš„ç§˜å¯†ã€‚" },
            { affection: 70, title: "å±é™©æ¥è¿‘", description: "æœ‰äººå¼€å§‹æš—ä¸­ç›‘è§†ä½ ä»¬çš„ç ”ç©¶æ´»åŠ¨ã€‚" },
            { affection: 80, title: "å®ˆæŠ¤è€…", description: "åŸæ¥å•µå•µå§çš„ç¥–çˆ¶æ˜¯å¤ç±çš„å®ˆæŠ¤è€…ï¼Œä¸€ç›´åœ¨ä¿æŠ¤å®ƒã€‚" },
            { affection: 90, title: "ä¼ æ‰¿ä½¿å‘½", description: "å•µå•µå§å†³å®šç»§æ‰¿ç¥–çˆ¶çš„ä½¿å‘½ï¼Œç»§ç»­ä¿æŠ¤å¤ç±ã€‚" },
            { affection: 100, title: "æ°¸æ’å®ˆæŠ¤", description: "å¥¹é‚€è¯·ä½ ä¸€èµ·æˆä¸ºå¤ç±çš„å®ˆæŠ¤è€…ï¼Œå…±åŒä¼ æ‰¿è¿™ä»½è´£ä»»ã€‚" }
          ],
          costumes: [
            { id: 0, name: "å›¾ä¹¦é¦†åˆ¶æœ", image: "https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/51b69d279e4943028d5bbfc9e25ca362.jpeg~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=womRcKMGS7klMrjKmwsXdf78nZM%3D", unlocked: true },
            { id: 1, name: "ä¼‘é—²è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6F2FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 60 Q30 80, 50 90 Q70 80, 70 60 L70 40 Q70 30, 50 30 Q30 30, 30 40 Z' fill='%2399CCFF'/%3E%3C/svg%3E", unlocked: false, requirement: 30 },
            { id: 2, name: "å¤å¤é•¿è£™", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFF0F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 40 Q30 90, 50 95 Q70 90, 70 40 Z' fill='%23DDA0DD'/%3E%3C/svg%3E", unlocked: false, requirement: 60 },
            { id: 3, name: "å®ˆæŠ¤è€…é•¿è¢", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F0F8FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 40 L50 60 L70 40 L70 90 L30 90 Z' fill='%234169E1'/%3E%3C/svg%3E", unlocked: false, requirement: 90 }
          ],
          haremImage: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFE4E1'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M50 50 Q70 70, 50 90 Q30 70, 50 50' fill='%23FFB6C1'/%3E%3C/svg%3E",
          dialogues: [
            {
              id: 0,
              text: "ä½ å¥½ï¼Œæˆ‘æ˜¯å•µå•µå§ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚éœ€è¦æ‰¾ä»€ä¹ˆç±»å‹çš„ä¹¦å—ï¼Ÿ",
              options: [
                { text: "ä½ å¥½ï¼Œæˆ‘ä¹Ÿå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚éšä¾¿çœ‹çœ‹ã€‚", affectionChange: 2, moodChange: 2 },
                { text: "å›¾ä¹¦é¦†çš„ä¹¦çœŸå¤šå•Šï¼Œæœ‰ä»€ä¹ˆæ¨èå—ï¼Ÿ", affectionChange: 3, moodChange: 3 },
                { text: "ä½ çœ‹èµ·æ¥å¾ˆä¸¥è‚ƒã€‚", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 1,
              text: "æˆ‘å–œæ¬¢åœ¨è¿™é‡Œå·¥ä½œï¼Œå®‰é™çš„ç¯å¢ƒèƒ½è®©æˆ‘é™ä¸‹å¿ƒæ¥é˜…è¯»ã€‚ä¸è¿‡æœ€è¿‘åœ¨æ‰¾ä¸€æœ¬ç‰¹åˆ«çš„ä¹¦ï¼Œæœ‰ç‚¹åˆ†å¿ƒã€‚",
              options: [
                { text: "æˆ‘ä¹Ÿå–œæ¬¢å®‰é™çš„ç¯å¢ƒã€‚ä»€ä¹ˆä¹¦è®©ä½ è¿™ä¹ˆåœ¨æ„ï¼Ÿ", affectionChange: 3, moodChange: 2 },
                { text: "æ˜¯å¾ˆéš¾æ‰¾çš„ç¨€æœ‰ä¹¦ç±å—ï¼Ÿ", affectionChange: 2, moodChange: 1 },
                { text: "å®‰é™çš„åœ°æ–¹æœ‰ç‚¹æ— èŠã€‚", affectionChange: -1, moodChange: -3 }
              ]
            },
            {
              id: 2,
              text: "æ˜¯æˆ‘å®¶æ—æµä¼ ä¸‹æ¥çš„ä¸€æœ¬å¤ç±ï¼Œæ®è¯´é‡Œé¢è®°è½½äº†å¾ˆé‡è¦çš„ä¸œè¥¿ï¼Œä½†å‡ åå¹´å‰é—å¤±äº†ã€‚",
              options: [
                { text: "å¬èµ·æ¥å¾ˆæœ‰æ•…äº‹ï¼Œéœ€è¦å¸®å¿™å¯»æ‰¾å—ï¼Ÿ", affectionChange: 4, moodChange: 4 },
                { text: "å¤ç±ä¸€èˆ¬éƒ½å¾ˆçè´µã€‚", affectionChange: 2, moodChange: 1 },
                { text: "åªæ˜¯ä¸€æœ¬ä¹¦è€Œå·²ï¼Œè‡³äºè¿™ä¹ˆæ‰§ç€å—ï¼Ÿ", affectionChange: -3, moodChange: -5 }
              ]
            },
            {
              id: 3,
              text: "æˆ‘çˆ·çˆ·æ˜¯å†å²å­¦å®¶ï¼Œè¿™æœ¬ä¹¦è®°è½½äº†å¾ˆå¤šåœ°æ–¹å†å²ã€‚ä»–å»ä¸–å‰ä¸€ç›´æƒ³æ‰¾åˆ°å®ƒ...",
              options: [
                { text: "æˆ‘æ˜ç™½ä½ çš„å¿ƒæƒ…ï¼Œæˆ‘ä¼šå°½åŠ›å¸®ä½ çš„ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "ä½ çˆ·çˆ·ä¸€å®šå¾ˆäº†ä¸èµ·ã€‚", affectionChange: 2, moodChange: 2 },
                { text: "éƒ½è¿‡å»è¿™ä¹ˆä¹…äº†ï¼Œå¯èƒ½æ—©å°±ä¸åœ¨äº†ã€‚", affectionChange: -2, moodChange: -4 }
              ]
            },
            {
              id: 4,
              text: "æ˜¨å¤©æ•´ç†æ—§ä¹¦æ—¶ï¼Œæˆ‘å‘ç°äº†ä¸€å¼ å¤¹åœ¨ä¹¦é‡Œçš„åœ°å›¾ç¢ç‰‡ï¼Œå¯èƒ½å’Œå¤ç±æœ‰å…³ã€‚",
              options: [
                { text: "å¤ªç¥å¥‡äº†ï¼æˆ‘ä»¬å¯ä»¥ä¸€èµ·ç ”ç©¶ä¸€ä¸‹å—ï¼Ÿ", affectionChange: 5, moodChange: 5 },
                { text: "åœ°å›¾ç¢ç‰‡è¿˜èƒ½çœ‹æ¸…å†…å®¹å—ï¼Ÿ", affectionChange: 3, moodChange: 2 },
                { text: "å¯èƒ½åªæ˜¯æ™®é€šçš„åœ°å›¾å§ã€‚", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 5,
              text: "è¿™äº›ç¬¦å·çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œåƒæ˜¯æŸç§å¯†ç ã€‚æˆ‘çˆ·çˆ·ç”Ÿå‰ä¸“é—¨ç ”ç©¶å¤ä»£æ–‡å­—...",
              options: [
                { text: "æˆ‘ä»¬å¯ä»¥ä¸€èµ·è§£è¯»è¿™äº›ç¬¦å·å—ï¼Ÿ", affectionChange: 4, moodChange: 3 },
                { text: "å¤ä»£æ–‡å­—ç¡®å®å¾ˆç¥ç§˜ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¿™çœ‹èµ·æ¥å¤ªå¤æ‚äº†ï¼Œå¯èƒ½è§£ä¸å¼€ã€‚", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 6,
              text: "ï¼ˆç´§å¼ åœ°ç¯é¡¾å››å‘¨ï¼‰æœ€è¿‘æ€»æ„Ÿè§‰æœ‰äººåœ¨ç›‘è§†æˆ‘ï¼Œå°¤å…¶æ˜¯åœ¨ç ”ç©¶å¤ç±çš„æ—¶å€™ã€‚",
              options: [
                { text: "åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¼šä¿æŠ¤ä½ çš„ã€‚", affectionChange: 5, moodChange: 4 },
                { text: "ä¹Ÿè®¸æ˜¯ä½ å¤ªç´§å¼ äº†ï¼Ÿ", affectionChange: 1, moodChange: -1 },
                { text: "è¿™å¬èµ·æ¥æœ‰ç‚¹å“äººï¼Œæˆ‘ä»¬åº”è¯¥æŠ¥è­¦ã€‚", affectionChange: 2, moodChange: 1 }
              ]
            },
            {
              id: 7,
              text: "åŸæ¥çˆ·çˆ·ä¸€ç›´åœ¨ä¿æŠ¤è¿™æœ¬å¤ç±ï¼Œå®ƒè®°å½•ç€ä¸€ä¸ªå…³äºæ—¶é—´çš„ç§˜å¯†...",
              options: [
                { text: "æ—¶é—´çš„ç§˜å¯†ï¼Ÿå¬èµ·æ¥å¾ˆä¸å¯æ€è®®ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "ä½ çˆ·çˆ·çœŸæ˜¯ä¸ªä¼Ÿå¤§çš„äººã€‚", affectionChange: 3, moodChange: 2 },
                { text: "è¿™ä¸ä¼šæ˜¯ç§‘å¹»å°è¯´å§ï¼Ÿ", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 8,
              text: "ç°åœ¨æˆ‘æ˜ç™½äº†ï¼Œä¿æŠ¤å¤ç±æ˜¯æˆ‘ä»¬å®¶æ—çš„ä½¿å‘½ã€‚ä½†è¿™ä¸ªè´£ä»»å¤ªé‡äº†...",
              options: [
                { text: "ä½ ä¸æ˜¯ä¸€ä¸ªäººï¼Œæˆ‘ä¼šé™ªåœ¨ä½ èº«è¾¹ã€‚", affectionChange: 6, moodChange: 5 },
                { text: "ä½ ä¸€å®šèƒ½èƒœä»»è¿™ä¸ªä½¿å‘½çš„ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "ä¹Ÿè®¸å¯ä»¥æ‰¾å…¶ä»–äººå¸®å¿™ï¼Ÿ", affectionChange: 2, moodChange: 1 }
              ]
            },
            {
              id: 9,
              text: "ï¼ˆçœ¼ä¸­é—ªçƒç€åšå®šçš„å…‰èŠ’ï¼‰æˆ‘å†³å®šç»§æ‰¿çˆ·çˆ·çš„é—å¿—ï¼Œç»§ç»­å®ˆæŠ¤è¿™æœ¬å¤ç±ã€‚ä½ æ„¿æ„å’Œæˆ‘ä¸€èµ·å—ï¼Ÿ",
              options: [
                { text: "æˆ‘æ„¿æ„ï¼æˆ‘ä»¬ä¸€èµ·å®ˆæŠ¤è¿™ä¸ªç§˜å¯†ã€‚", affectionChange: 8, moodChange: 6 },
                { text: "è¿™æ˜¯ä¸€ä¸ªé‡å¤§çš„å†³å®šï¼Œè®©æˆ‘è€ƒè™‘ä¸€ä¸‹ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "æˆ‘è§‰å¾—è¿™ä¸ªè´£ä»»å¤ªæ²‰é‡äº†ã€‚", affectionChange: -5, moodChange: -6 }
              ]
            }
          ]
        },
        {
          id: 1,
          name: "é¹å“¥",
          title: "ç¥ç§˜é…·å“¥ Â· ä½“è‚²æ•™ç»ƒ",
          personality: "æ²‰é»˜å¯¡è¨€ï¼Œèº«æ‰‹çŸ«å¥ï¼Œæ›¾æ˜¯ä¸“ä¸šè¿åŠ¨å‘˜ï¼Œå› ä¼¤é€€å½¹ã€‚",
          likes: ["è¿åŠ¨", "æ¸¸æˆ", "ç”µå­äº§å“"],
          affection: 0,
          mood: 50,
          isHarem: false,
          currentCostume: 0,
          storyMilestones: [
            { affection: 10, title: "åˆæ¬¡è®­ç»ƒ", description: "é¹å“¥æŒ‡å¯¼ä½ å®Œæˆäº†ç¬¬ä¸€æ¬¡è®­ç»ƒï¼Œå¯¹ä½ çš„è¡¨ç°æœ‰äº›æ„å¤–ã€‚" },
            { affection: 20, title: "è¿‡å»çš„è¾‰ç…Œ", description: "ä½ å‘ç°ä»–æ›¾æ˜¯å›½å®¶é˜Ÿé€‰æ‰‹ï¼Œè·å¾—è¿‡å¾ˆå¤šå¥–é¡¹ã€‚" },
            { affection: 30, title: "å—ä¼¤é˜´å½±", description: "ä»–å‘Šè¯‰ä½ å› ä¸ºä¸€æ¬¡ä¸¥é‡å—ä¼¤ä¸å¾—ä¸é€€å½¹çš„ç»å†ã€‚" },
            { affection: 40, title: "å¿ƒç†éšœç¢", description: "é€€å½¹åä»–ä¸€ç›´æ— æ³•èµ°å‡ºé˜´å½±ï¼Œç”šè‡³ä¸æ•¢çœ‹æ¯”èµ›å½•åƒã€‚" },
            { affection: 50, title: "é‡æ–°å¼€å§‹", description: "åœ¨ä½ çš„é¼“åŠ±ä¸‹ï¼Œä»–å¼€å§‹å°è¯•æ¢å¤è®­ç»ƒã€‚" },
            { affection: 60, title: "æ•™ç»ƒå¤©èµ‹", description: "ä½ å‘ç°ä»–åœ¨æŒ‡å¯¼åˆ«äººæ—¶ç‰¹åˆ«æœ‰è€å¿ƒå’Œå¤©èµ‹ã€‚" },
            { affection: 70, title: "é‡è¿”èµ›åœº", description: "ä»–å†³å®šä»¥æ•™ç»ƒèº«ä»½é‡è¿”èµ›åœºï¼ŒåŸ¹å…»æ–°äººã€‚" },
            { affection: 80, title: "å¿ƒç»“è§£å¼€", description: "é€šè¿‡æŒ‡å¯¼å¹´è½»äººï¼Œä»–é€æ¸è§£å¼€äº†å¿ƒä¸­çš„ç»“ã€‚" },
            { affection: 90, title: "æ–°çš„ç›®æ ‡", description: "ä»–æ¢¦æƒ³ç»„å»ºä¸€æ”¯å† å†›é˜Ÿä¼ï¼Œè¯æ˜è‡ªå·±çš„ä»·å€¼ã€‚" },
            { affection: 100, title: "ä¼ æ‰¿ç²¾ç¥", description: "ä»–å¸Œæœ›å°†è‡ªå·±çš„ç»éªŒå’Œç²¾ç¥ä¼ æ‰¿ç»™ä¸‹ä¸€ä»£è¿åŠ¨å‘˜ã€‚" }
          ],
          costumes: [
            { id: 0, name: "æ•™ç»ƒæœ", image: "https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/cd2d7d88c7ce4fb491c282aa359de240.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=lqt58sUJrMXZM7uE19AMAcVBHso%3D", unlocked: true },
            { id: 1, name: "è¿åŠ¨è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6FFFA'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399CCFF'/%3E%3Cpath d='M30 45 L30 65 L25 65 L25 75 L35 75 L35 65 L30 65 L30 80 L70 80 L70 65 L65 65 L65 75 L75 75 L75 65 L70 65 L70 45 Z' fill='%2332CD32'/%3E%3C/svg%3E", unlocked: false, requirement: 30 },
            { id: 2, name: "ä¼‘é—²è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F5F5F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399CCFF'/%3E%3Cpath d='M30 50 L30 80 L70 80 L70 50 L60 50 L60 40 L40 40 L40 50 Z' fill='%23696969'/%3E%3C/svg%3E", unlocked: false, requirement: 60 },
            { id: 3, name: "å† å†›æˆ˜è¢", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F0F8FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399CCFF'/%3E%3Cpath d='M30 40 L30 80 L70 80 L70 40 L60 40 L60 50 L40 50 L40 40 Z' fill='%23000080'/%3E%3Cpath d='M45 50 L55 50 L55 80 L45 80 Z' fill='%238B4513'/%3E%3C/svg%3E", unlocked: false, requirement: 90 }
          ],
          haremImage: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6F2FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399CCFF'/%3E%3Cpath d='M50 50 Q70 70, 50 90 Q30 70, 50 50' fill='%2399CCFF'/%3E%3C/svg%3E",
          dialogues: [
            {
              id: 0,
              text: "å—¯ï¼Ÿæœ‰äº‹å—ï¼Ÿ",
              options: [
                { text: "ä½ å¥½ï¼Œæˆ‘æƒ³è®¤è¯†ä½ ã€‚", affectionChange: 1, moodChange: 1 },
                { text: "æˆ‘æƒ³è¯·ä½ æŒ‡å¯¼æˆ‘è®­ç»ƒã€‚", affectionChange: 3, moodChange: 3 },
                { text: "ä½ ä¸ºä»€ä¹ˆæ€»æ˜¯æˆ´ç€å¢¨é•œï¼Ÿ", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 1,
              text: "æˆ‘æ˜¯è¿™é‡Œçš„ä½“è‚²æ•™ç»ƒï¼Œè´Ÿè´£æŒ‡å¯¼å­¦å‘˜çš„è®­ç»ƒã€‚ä½ çš„ä½“èƒ½åŸºç¡€æ€ä¹ˆæ ·ï¼Ÿ",
              options: [
                { text: "ä¸€èˆ¬èˆ¬ï¼Œå¸Œæœ›èƒ½å¾—åˆ°ä½ çš„æŒ‡å¯¼ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "æˆ‘ä»¥å‰å¾ˆå–œæ¬¢è¿åŠ¨ï¼Œä½†å¾ˆä¹…æ²¡ç»ƒäº†ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "æˆ‘å¯¹è¿åŠ¨æ²¡å…´è¶£ï¼Œåªæ˜¯æƒ³è®¤è¯†ä½ ã€‚", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 2,
              text: "ï¼ˆçœ‹åˆ°ä½ åŠªåŠ›è®­ç»ƒï¼‰æ¯”æˆ‘æƒ³è±¡çš„è¦è®¤çœŸã€‚ä»¥å‰ç»ƒè¿‡ä»€ä¹ˆé¡¹ç›®å—ï¼Ÿ",
              options: [
                { text: "ä¸Šå­¦æ—¶å‚åŠ è¿‡ç”°å¾„é˜Ÿã€‚", affectionChange: 3, moodChange: 2 },
                { text: "æ²¡æœ‰ç³»ç»Ÿè®­ç»ƒè¿‡ï¼Œåªæ˜¯å¶å°”é”»ç‚¼ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "ä¸å¤ªå–œæ¬¢è¿åŠ¨ï¼Œæ˜¯ä¸ºäº†ä½ æ‰æ¥çš„ã€‚", affectionChange: 2, moodChange: 3 }
              ]
            },
            {
              id: 3,
              text: "ï¼ˆçœ‹åˆ°ä½ ç›¯ç€æˆ‘æ¡Œä¸Šçš„å¥–ç‰Œï¼‰...é‚£æ˜¯ä»¥å‰çš„ä¸œè¥¿äº†ã€‚",
              options: [
                { text: "ä½ ä»¥å‰æ˜¯ä¸“ä¸šè¿åŠ¨å‘˜å—ï¼Ÿå¤ªå‰å®³äº†ï¼", affectionChange: 4, moodChange: 4 },
                { text: "è¿™äº›å¥–ç‰Œçœ‹èµ·æ¥å¾ˆæœ‰å¹´ä»£æ„Ÿäº†ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¿‡å»çš„æˆå°±ä¸ä»£è¡¨ç°åœ¨å§ã€‚", affectionChange: -3, moodChange: -5 }
              ]
            },
            {
              id: 4,
              text: "ï¼ˆæ²‰é»˜å¾ˆä¹…ï¼‰æˆ‘æ›¾ç»æ˜¯å›½å®¶é˜Ÿçš„ï¼Œè†ç›–å—ä¼¤åå°±é€€å½¹äº†ã€‚",
              options: [
                { text: "çœŸé—æ†¾...ä½†ç°åœ¨ä½œä¸ºæ•™ç»ƒä¹Ÿå¾ˆæ£’å•Šï¼", affectionChange: 5, moodChange: 4 },
                { text: "å—ä¼¤ä¸€å®šå¾ˆç—›è‹¦å§ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "æ‰€ä»¥ä½ ç°åœ¨æ‰è¿™ä¹ˆå†·æ·¡å—ï¼Ÿ", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 5,
              text: "é€€å½¹åæˆ‘ä¸€ç›´æ— æ³•é¢å¯¹ç°å®ï¼Œç”šè‡³ä¸æ•¢çœ‹ä½“è‚²æ¯”èµ›...",
              options: [
                { text: "è¿™ä¸€å®šå¾ˆç—›è‹¦ï¼Œä½†ä½ ç°åœ¨å·²ç»å¾ˆåšå¼ºäº†ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "æ—¶é—´ä¼šæ²»æ„ˆä¸€åˆ‡çš„ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "ä½ åº”è¯¥æ—©ç‚¹å¯»æ±‚å¿ƒç†å¸®åŠ©çš„ã€‚", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 6,
              text: "å’Œä½ ä¸€èµ·è®­ç»ƒè®©æˆ‘æƒ³èµ·äº†ä»¥å‰çš„æ—¥å­...ä¹Ÿè®¸æˆ‘å¯ä»¥å°è¯•é‡æ–°å¼€å§‹ã€‚",
              options: [
                { text: "è¿™å¤ªå¥½äº†ï¼æˆ‘ç›¸ä¿¡ä½ ä¸€å®šå¯ä»¥çš„ã€‚", affectionChange: 5, moodChange: 5 },
                { text: "æ…¢æ…¢æ¥ï¼Œä¸è¦ç»™è‡ªå·±å¤ªå¤§å‹åŠ›ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ä½ ç¡®å®šä½ å‡†å¤‡å¥½äº†å—ï¼Ÿ", affectionChange: 1, moodChange: 1 }
              ]
            },
            {
              id: 7,
              text: "æˆ‘å‘ç°æŒ‡å¯¼åˆ«äººæ—¶ï¼Œæˆ‘èƒ½æ‰¾åˆ°æ–°çš„æ„ä¹‰å’Œä»·å€¼ã€‚",
              options: [
                { text: "ä½ å¾ˆæœ‰æ•™ç»ƒå¤©èµ‹ï¼Œåº”è¯¥åšæŒä¸‹å»ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "å¸®åŠ©åˆ«äººç¡®å®èƒ½è®©äººæ„Ÿåˆ°å¿«ä¹ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¿™åªæ˜¯æš‚æ—¶çš„ï¼Œä½ è¿˜æ˜¯ä¼šæƒ³å›åˆ°èµ›åœºçš„ã€‚", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 8,
              text: "æˆ‘æƒ³ç»„å»ºä¸€æ”¯é’å°‘å¹´é˜Ÿä¼ï¼ŒæŠŠæˆ‘çš„ç»éªŒä¼ æˆç»™ä»–ä»¬ã€‚",
              options: [
                { text: "è¿™æ˜¯ä¸ªå¾ˆæ£’çš„æƒ³æ³•ï¼æˆ‘ä¼šæ”¯æŒä½ çš„ã€‚", affectionChange: 6, moodChange: 5 },
                { text: "åŸ¹å…»å¹´è½»äººç¡®å®å¾ˆæœ‰æ„ä¹‰ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "è¿™éœ€è¦å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›å§ï¼Ÿ", affectionChange: 1, moodChange: 1 }
              ]
            },
            {
              id: 9,
              text: "ï¼ˆçœ¼ä¸­é‡æ–°ç‡ƒèµ·å…‰èŠ’ï¼‰æˆ‘è¦è¯æ˜å³ä½¿ä¸èƒ½äº²è‡ªæ¯”èµ›ï¼Œæˆ‘ä¾ç„¶èƒ½åœ¨ä½“è‚²ç•Œåˆ›é€ ä»·å€¼ã€‚",
              options: [
                { text: "ä½ å·²ç»åšåˆ°äº†ï¼ä½ æ˜¯ä¸ªçœŸæ­£çš„å† å†›ã€‚", affectionChange: 8, moodChange: 6 },
                { text: "æˆ‘ç›¸ä¿¡ä½ ä¸€å®šèƒ½æˆåŠŸçš„ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "è¿™å¬èµ·æ¥å¾ˆéš¾ï¼Œä½†å€¼å¾—ä¸€è¯•ã€‚", affectionChange: 2, moodChange: 2 }
              ]
            }
          ]
        },
        {
          id: 2,
          name: "é¦™æ³¢å“¥",
          title: "æˆç†Ÿç¨³é‡ Â· å…¬å¸æ€»è£",
          personality: "äº‹ä¸šæœ‰æˆï¼Œæ¸©æ–‡å°”é›…ï¼Œæ­£é¢ä¸´å®¶æ—ä¼ä¸šç»§æ‰¿çš„é‡å¤§æŠ‰æ‹©ã€‚",
          likes: ["çº¢é…’", "ä¹¦æ³•", "å¤å…¸è‰ºæœ¯"],
          affection: 0,
          mood: 60,
          isHarem: false,
          currentCostume: 0,
          storyMilestones: [
            { affection: 10, title: "å•†åŠ¡åˆé‡", description: "ä½ åœ¨ä¸€æ¬¡å•†ä¸šæ´»åŠ¨ä¸­è®¤è¯†äº†é¦™æ³¢å“¥ï¼Œä»–å¯¹ä½ çš„è§è§£å¾ˆæ„Ÿå…´è¶£ã€‚" },
            { affection: 20, title: "å®¶æ—å‹åŠ›", description: "ä»–é€éœ²å®¶æ—å¸Œæœ›ä»–ä¸å•†ä¸šä¼™ä¼´çš„å¥³å„¿è”å§»ã€‚" },
            { affection: 30, title: "å†…å¿ƒæŒ£æ‰", description: "ä»–å‘ä½ å€¾è¯‰å¯¹å®¶æ—å®‰æ’çš„ä¸æ»¡å’Œæ— å¥ˆã€‚" },
            { affection: 40, title: "å•†ä¸šå±æœº", description: "å…¬å¸çªç„¶é¢ä¸´é‡å¤§å±æœºï¼Œå®¶æ—è”å§»çš„å‹åŠ›æ›´å¤§äº†ã€‚" },
            { affection: 50, title: "ç‹¬ç«‹æ€è€ƒ", description: "åœ¨ä½ çš„é¼“åŠ±ä¸‹ï¼Œä»–å¼€å§‹æ€è€ƒè‡ªå·±çœŸæ­£æƒ³è¦çš„æ˜¯ä»€ä¹ˆã€‚" },
            { affection: 60, title: "å‹‡æ•¢åæŠ—", description: "ä»–å†³å®šåæŠ—å®¶æ—å®‰æ’ï¼ŒåšæŒè‡ªå·±çš„é€‰æ‹©ã€‚" },
            { affection: 70, title: "å±æœºå¤„ç†", description: "é€šè¿‡è‡ªå·±çš„æ™ºæ…§å’ŒåŠªåŠ›ï¼Œä»–æˆåŠŸåŒ–è§£äº†å…¬å¸å±æœºã€‚" },
            { affection: 80, title: "å®¶æ—ç†è§£", description: "å®¶æ—æˆå‘˜å¼€å§‹ç†è§£å’Œæ”¯æŒä»–çš„å†³å®šã€‚" },
            { affection: 90, title: "æ–°çš„å¼€å§‹", description: "ä»–é‡æ–°å®šä¹‰äº†å…¬å¸çš„å‘å±•æ–¹å‘å’Œä»·å€¼è§‚ã€‚" },
            { affection: 100, title: "çœŸçˆ±è‡³ä¸Š", description: "ä»–æ˜ç™½äº†çœŸæ­£çš„å¹¸ç¦æ¥è‡ªäºå†…å¿ƒçš„é€‰æ‹©ï¼Œè€Œä¸æ˜¯å¤–ç•Œçš„æœŸæœ›ã€‚" }
          ],
          costumes: [
            { id: 0, name: "è¥¿è£…", image: "https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/c6d542f684ce42f5ab91cd7d6ee64fde.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=O0OZgejwvXJhQguwKC5lRpNdgOo%3D", unlocked: true },
            { id: 1, name: "ä¼‘é—²è¥¿è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F5F5F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23CCCCCC'/%3E%3Cpath d='M30 40 L30 80 L70 80 L70 40 L60 40 L60 50 L40 50 L40 40 Z' fill='%23D2B48C'/%3E%3Cpath d='M45 50 L55 50 L55 80 L45 80 Z' fill='%23000080'/%3E%3C/svg%3E", unlocked: false, requirement: 30 },
            { id: 2, name: "å”è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFF0F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23CCCCCC'/%3E%3Cpath d='M30 40 L30 80 L70 80 L70 40 Z' fill='%238B0000'/%3E%3Cpath d='M50 40 L50 80' stroke='%23FFFF00' stroke-width='2'/%3E%3C/svg%3E", unlocked: false, requirement: 60 },
            { id: 3, name: "è‡ªç”±ä¼ä¸šå®¶", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%2387CEEB'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23CCCCCC'/%3E%3Cpath d='M30 50 L30 80 L70 80 L70 50 L60 50 L60 45 L40 45 L40 50 Z' fill='%23228B22'/%3E%3C/svg%3E", unlocked: false, requirement: 90 }
          ],
          haremImage: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F5F5F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23CCCCCC'/%3E%3Cpath d='M50 50 Q70 70, 50 90 Q30 70, 50 50' fill='%23CCCCCC'/%3E%3C/svg%3E",
          dialogues: [
            {
              id: 0,
              text: "ä½ å¥½ï¼Œæˆ‘æ˜¯é¦™æ³¢å“¥ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚æ„Ÿè°¢ä½ æ¥å‚åŠ æˆ‘ä»¬å…¬å¸çš„æ´»åŠ¨ã€‚",
              options: [
                { text: "ä½ å¥½ï¼Œæˆ‘ä¹Ÿå¾ˆé«˜å…´è®¤è¯†ä½ ã€‚è´µå…¬å¸çš„æ´»åŠ¨å¾ˆç²¾å½©ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ç‹æ€»å¹´è½»æœ‰ä¸ºï¼ŒçœŸæ˜¯ä»¤äººæ•¬ä½©ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¿™ç§å•†ä¸šæ´»åŠ¨çœŸæ— èŠã€‚", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 1,
              text: "è¿‡å¥–äº†ã€‚å…¶å®ç»è¥å…¬å¸å¹¶ä¸å®¹æ˜“ï¼Œå°¤å…¶æ˜¯å®¶æ—ä¼ä¸šï¼Œæœ‰å¾ˆå¤šèº«ä¸ç”±å·±çš„æ—¶å€™ã€‚",
              options: [
                { text: "å®¶æ—ä¼ä¸šç¡®å®æœ‰æ›´å¤šè´£ä»»å’Œå‹åŠ›å§ï¼Ÿ", affectionChange: 3, moodChange: 2 },
                { text: "ä½†è¿™ä¹Ÿæ˜¯å¾ˆå¤šäººç¾¡æ…•çš„ä½ç½®ã€‚", affectionChange: 1, moodChange: 0 },
                { text: "æ—¢ç„¶è§‰å¾—ç´¯ï¼Œä¸ºä»€ä¹ˆä¸æ”¾å¼ƒå‘¢ï¼Ÿ", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 2,
              text: "ï¼ˆå¹æ°”ï¼‰æœ€è¿‘å®¶é‡Œä¸€ç›´åœ¨å‚¬æˆ‘å’Œææ°é›†å›¢çš„åƒé‡‘è®¢å©šï¼Œè¿™å¯¹å…¬å¸å‘å±•æœ‰å¥½å¤„ã€‚",
              options: [
                { text: "è¿™æ˜¯å•†ä¸šè”å§»å—ï¼Ÿä½ è‡ªå·±çš„æƒ³æ³•å‘¢ï¼Ÿ", affectionChange: 4, moodChange: 3 },
                { text: "ææ°é›†å›¢ç¡®å®æ˜¯å¾ˆå¥½çš„åˆä½œä¼™ä¼´ã€‚", affectionChange: 1, moodChange: 0 },
                { text: "è¿™ç§äº‹ä¸åº”è¯¥ç”±è‡ªå·±å†³å®šå—ï¼Ÿ", affectionChange: 2, moodChange: 1 }
              ]
            },
            {
              id: 3,
              text: "æˆ‘å¯¹å¥¹æ²¡æœ‰æ„Ÿè§‰ï¼Œä½†å®¶æ—åˆ©ç›Šä¸ºé‡...æœ‰æ—¶å€™çœŸå¸Œæœ›èƒ½åƒæ™®é€šäººä¸€æ ·è‡ªç”±é€‰æ‹©ã€‚",
              options: [
                { text: "æˆ‘ç›¸ä¿¡ä½ æœ‰èƒ½åŠ›å¹³è¡¡å®¶æ—å’Œä¸ªäººçš„å¹¸ç¦ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "å•†ä¸šè”å§»åœ¨è±ªé—¨å¾ˆå¸¸è§å§ï¼Ÿ", affectionChange: 1, moodChange: 0 },
                { text: "ä¸ºä»€ä¹ˆä¸å‹‡æ•¢ä¸€ç‚¹è¿½æ±‚è‡ªå·±æƒ³è¦çš„ï¼Ÿ", affectionChange: 3, moodChange: 2 }
              ]
            },
            {
              id: 4,
              text: "å’Œä½ èŠå¤©å¾ˆèˆ’æœï¼Œè®©æˆ‘è§‰å¾—è‡ªå·±ä¸æ˜¯å­¤å•ä¸€äººã€‚è°¢è°¢ä½ å¬æˆ‘è¯´è¿™äº›ã€‚",
              options: [
                { text: "æˆ‘å¾ˆä¹æ„å¬ä½ å€¾è¯‰ï¼Œéšæ—¶éƒ½å¯ä»¥æ‰¾æˆ‘ã€‚", affectionChange: 5, moodChange: 4 },
                { text: "èƒ½å¸®åˆ°ä½ å°±å¥½ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "å…¶å®æˆ‘ä¹Ÿå¾ˆè£å¹¸èƒ½å’Œç‹æ€»èŠå¤©ã€‚", affectionChange: 2, moodChange: 1 }
              ]
            },
            {
              id: 5,
              text: "å…¬å¸æœ€è¿‘é‡åˆ°äº†ä¸€äº›å›°éš¾ï¼Œå¦‚æœä¸è”å§»çš„è¯ï¼Œå¯èƒ½æ— æ³•åº¦è¿‡è¿™æ¬¡å±æœºã€‚",
              options: [
                { text: "ä½ ä¸€å®šèƒ½æ‰¾åˆ°å…¶ä»–è§£å†³åŠæ³•çš„ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "è¿™ç¡®å®æ˜¯ä¸ªè‰°éš¾çš„é€‰æ‹©ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "ä¹Ÿè®¸è”å§»æ˜¯å”¯ä¸€çš„å‡ºè·¯ï¼Ÿ", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 6,
              text: "åœ¨ä½ çš„é¼“åŠ±ä¸‹ï¼Œæˆ‘å¼€å§‹æ€è€ƒï¼šçœŸæ­£çš„æˆåŠŸåº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Ÿ",
              options: [
                { text: "æˆåŠŸå°±æ˜¯åšè‡ªå·±è®¤ä¸ºæœ‰æ„ä¹‰çš„äº‹æƒ…ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "æ¯ä¸ªäººå¯¹æˆåŠŸçš„å®šä¹‰éƒ½ä¸åŒã€‚", affectionChange: 2, moodChange: 1 },
                { text: "æˆåŠŸå°±æ˜¯èµšå¾ˆå¤šé’±å§ï¼Ÿ", affectionChange: -2, moodChange: -2 }
              ]
            },
            {
              id: 7,
              text: "æˆ‘å†³å®šæ‹’ç»è”å§»ï¼Œç”¨è‡ªå·±çš„æ–¹å¼è§£å†³å…¬å¸çš„é—®é¢˜ã€‚å³ä½¿å¤±è´¥ï¼Œæˆ‘ä¹Ÿä¸ä¼šåæ‚”ã€‚",
              options: [
                { text: "è¿™éœ€è¦å¾ˆå¤§çš„å‹‡æ°”ï¼Œæˆ‘æ”¯æŒä½ çš„å†³å®šï¼", affectionChange: 6, moodChange: 5 },
                { text: "ä½ çœŸçš„æƒ³æ¸…æ¥šäº†å—ï¼Ÿ", affectionChange: 1, moodChange: 0 },
                { text: "è¿™å¯èƒ½ä¼šè®©ä½ å¤±å»å¾ˆå¤šã€‚", affectionChange: -3, moodChange: -4 }
              ]
            },
            {
              id: 8,
              text: "é€šè¿‡è¿™æ¬¡å±æœºï¼Œæˆ‘é‡æ–°è®¤è¯†äº†ä»€ä¹ˆæ˜¯çœŸæ­£é‡è¦çš„ã€‚è´¢å¯Œå’Œåœ°ä½å¹¶ä¸ç­‰äºå¹¸ç¦ã€‚",
              options: [
                { text: "ä½ èƒ½æœ‰è¿™æ ·çš„æ„Ÿæ‚Ÿï¼ŒçœŸçš„å¾ˆäº†ä¸èµ·ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "ç»å†å›°éš¾ç¡®å®èƒ½è®©äººæˆé•¿ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¯´èµ·æ¥å®¹æ˜“ï¼Œåšèµ·æ¥éš¾å§ï¼Ÿ", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 9,
              text: "ï¼ˆçœ¼ä¸­é—ªçƒç€çœŸè¯šçš„å…‰èŠ’ï¼‰æˆ‘æƒ³é‡æ–°å®šä¹‰å…¬å¸çš„ä»·å€¼è§‚ï¼Œè®©å®ƒæˆä¸ºä¸€ä¸ªçœŸæ­£æœ‰æ¸©åº¦çš„ä¼ä¸šã€‚ä½ æ„¿æ„å’Œæˆ‘ä¸€èµ·å—ï¼Ÿ",
              options: [
                { text: "æˆ‘æ„¿æ„ï¼å’Œä½ ä¸€èµ·åˆ›é€ æ›´ç¾å¥½çš„æœªæ¥ã€‚", affectionChange: 8, moodChange: 6 },
                { text: "è¿™æ˜¯ä¸ªç¾å¥½çš„æ„¿æ™¯ï¼Œæˆ‘ä¼šæ”¯æŒä½ çš„ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "è¿™å¬èµ·æ¥å¾ˆç†æƒ³ä¸»ä¹‰ã€‚", affectionChange: -2, moodChange: -2 }
              ]
            }
          ]
        },
        {
          id: 3,
          name: "æ™¶æ™¶å§",
          title: "æ¸©æŸ”å¯çˆ± Â· ç”œç‚¹å¸ˆ",
          personality: "å¿ƒåœ°å–„è‰¯ï¼Œç¬‘å®¹ç”œç¾ï¼Œæ­£åœ¨å¯»æ‰¾å¤±æ•£å¤šå¹´çš„åŒèƒèƒå¦¹å¦¹ã€‚",
          likes: ["ç”œç‚¹", "å°åŠ¨ç‰©", "æ‰‹å·¥åˆ¶å“"],
          affection: 0,
          mood: 80,
          isHarem: false,
          currentCostume: 0,
          storyMilestones: [
            { affection: 10, title: "ç”œç‚¹ç›¸é‡", description: "ä½ å“å°äº†æ™¶æ™¶å§åšçš„ç”œç‚¹ï¼Œèµä¸ç»å£ï¼Œå¥¹å®³ç¾åœ°ç¬‘äº†ã€‚" },
            { affection: 20, title: "å¦¹å¦¹çš„ç…§ç‰‡", description: "ä½ å¶ç„¶çœ‹åˆ°å¥¹é’±åŒ…é‡Œæœ‰ä¸€å¼ ä¸¤ä¸ªå°å¥³å­©çš„åˆå½±ã€‚" },
            { affection: 30, title: "åˆ†ç¦»çš„å¾€äº‹", description: "å¥¹å‘Šè¯‰ä½ å’Œå¦¹å¦¹åœ¨æ¸¸ä¹å›­å¤±æ•£çš„ä¼¤å¿ƒå¾€äº‹ã€‚" },
            { affection: 40, title: "å¯»æ‰¾çº¿ç´¢", description: "ä½ ä»¬ä¸€èµ·æ•´ç†æ—§ç‰©ï¼Œæ‰¾åˆ°äº†å½“å¹´çš„æ¸¸ä¹å›­é—¨ç¥¨ã€‚" },
            { affection: 50, title: "èƒè®°ç‰¹å¾", description: "å¥¹æåˆ°å¦¹å¦¹èº«ä¸Šæœ‰ç‰¹æ®Šçš„èƒè®°ï¼Œæ˜¯å¯»æ‰¾çš„å…³é”®ã€‚" },
            { affection: 60, title: "å¸Œæœ›ä¹‹å…‰", description: "æœ‰äººæä¾›äº†å¯èƒ½è§è¿‡å¥¹å¦¹å¦¹çš„çº¿ç´¢ã€‚" },
            { affection: 70, title: "è‰°éš¾å¯»æ‰¾", description: "ä½ ä»¬æŒ‰ç…§çº¿ç´¢å¯»æ‰¾ï¼Œä½†é‡åˆ°äº†å¾ˆå¤šå›°éš¾ã€‚" },
            { affection: 80, title: "æ„å¤–é‡é€¢", description: "åœ¨ä¸€ä¸ªå¶ç„¶çš„æœºä¼šä¸‹ï¼Œä½ ä»¬æ‰¾åˆ°äº†å¥¹çš„å¦¹å¦¹ã€‚" },
            { affection: 90, title: "å§å¦¹æƒ…æ·±", description: "å§å¦¹é‡é€¢çš„æ„Ÿäººåœºé¢ï¼Œå¤šå¹´çš„æ€å¿µç»ˆäºå¾—åˆ°äº†æ…°è—‰ã€‚" },
            { affection: 100, title: "æ–°çš„å¼€å§‹", description: "å¥¹ä»¬å†³å®šä¸€èµ·ç»è¥ç”œç‚¹åº—ï¼Œåˆ›é€ å±äºå¥¹ä»¬çš„å¹¸ç¦ã€‚" }
          ],
          costumes: [
            { id: 0, name: "ç”œç‚¹å¸ˆåˆ¶æœ", image: "https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/f62afbbe16204edfb46496c5c0f1ca55.jpeg~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=IIZ5v1w%2FhfBrw5l2ShG8V%2BwGrsA%3D", unlocked: true },
            { id: 1, name: "ä¼‘é—²è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFF0F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 50 L30 80 L70 80 L70 50 Z' fill='%23FFC0CB'/%3E%3C/svg%3E", unlocked: false, requirement: 30 },
            { id: 2, name: "è¿è¡£è£™", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6F2FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 40 L30 80 L50 90 L70 80 L70 40 Z' fill='%2399CCFF'/%3E%3C/svg%3E", unlocked: false, requirement: 60 },
            { id: 3, name: "å§å¦¹è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFF0F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFB6C1'/%3E%3Cpath d='M30 40 L50 60 L70 40 L70 80 L50 90 L30 80 Z' fill='%23FF69B4'/%3E%3C/svg%3E", unlocked: false, requirement: 90 }
          ],
          haremImage: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23FFF0F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%23FFCCDD'/%3E%3Cpath d='M50 50 Q70 70, 50 90 Q30 70, 50 50' fill='%23FFCCDD'/%3E%3C/svg%3E",
          dialogues: [
            {
              id: 0,
              text: "ä½ å¥½ï¼æ¬¢è¿æ¥åˆ°æˆ‘çš„ç”œç‚¹åº—ï¼ä»Šå¤©æœ‰åˆšå‡ºç‚‰çš„è‰è“è›‹ç³•ï¼Œè¦å°å°å—ï¼Ÿ",
              options: [
                { text: "ä½ å¥½ï¼Œä½ çš„åº—çœŸå¯çˆ±ã€‚æˆ‘è¦ä¸€ä»½è‰è“è›‹ç³•ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "çœ‹èµ·æ¥å¾ˆå¥½åƒï¼Œä½ åšç”œç‚¹å¤šä¹…äº†ï¼Ÿ", affectionChange: 2, moodChange: 1 },
                { text: "ç”œç‚¹ä¼šè®©äººå‘èƒ–å§ï¼Ÿ", affectionChange: -1, moodChange: -2 }
              ]
            },
            {
              id: 1,
              text: "æˆ‘åšç”œç‚¹äº”å¹´äº†ï¼Œè¿™æ˜¯æˆ‘å°æ—¶å€™å’Œå¦¹å¦¹ä¸€èµ·æœ€å–œæ¬¢çš„äº‹æƒ…...ï¼ˆçªç„¶æ²‰é»˜ï¼‰",
              options: [
                { text: "ä½ æœ‰å¦¹å¦¹å—ï¼Ÿä¸€å®šå¾ˆå¯çˆ±å§ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ä½ çš„æ‰‹è‰ºè¿™ä¹ˆå¥½ï¼Œå¦¹å¦¹ä¸€å®šå¾ˆä¸ºä½ éª„å‚²ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "æŠ±æ­‰ï¼Œæåˆ°äº†ä½ çš„ä¼¤å¿ƒäº‹å—ï¼Ÿ", affectionChange: 2, moodChange: 1 }
              ]
            },
            {
              id: 2,
              text: "æˆ‘ä»¬æ˜¯åŒèƒèƒï¼Œå°æ—¶å€™åœ¨æ¸¸ä¹å›­å¤±æ•£äº†...æˆ‘ä¸€ç›´åœ¨æ‰¾å¥¹ï¼Œä½†æ²¡æœ‰çº¿ç´¢ã€‚",
              options: [
                { text: "çœŸå¯æ€œ...éœ€è¦æˆ‘å¸®å¿™ä¸€èµ·æ‰¾å—ï¼Ÿ", affectionChange: 4, moodChange: 3 },
                { text: "ä¸€å®šä¼šæ‰¾åˆ°çš„ï¼Œåˆ«æ”¾å¼ƒå¸Œæœ›ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "è¿™ä¹ˆä¹…äº†ï¼Œå¯èƒ½å·²ç»æ‰¾ä¸åˆ°äº†å§ã€‚", affectionChange: -3, moodChange: -4 }
              ]
            },
            {
              id: 3,
              text: "å¦ˆå¦ˆè¯´æˆ‘ä»¬èº«ä¸Šæœ‰ä¸€æ ·çš„èƒè®°ï¼Œåœ¨é”éª¨ä¸‹æ–¹ï¼Œåƒå°è‰è“ä¸€æ ·...",
              options: [
                { text: "è¿™ä¸ªç‰¹å¾å¾ˆæ˜æ˜¾ï¼Œä¸€å®šèƒ½å¸®ä¸Šå¿™çš„ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "æˆ‘ä¼šç•™æ„èº«è¾¹æœ‰æ²¡æœ‰è¿™æ ·çš„äººã€‚", affectionChange: 4, moodChange: 3 },
                { text: "å…‰å‡­èƒè®°å¯èƒ½è¿˜æ˜¯å¾ˆéš¾æ‰¾ã€‚", affectionChange: 1, moodChange: 0 }
              ]
            },
            {
              id: 4,
              text: "æ˜¨å¤©æ•´ç†æ—§ç‰©æ—¶ï¼Œæˆ‘æ‰¾åˆ°äº†ä¸€å¼ å½“å¹´æ¸¸ä¹å›­çš„é—¨ç¥¨ï¼Œä¹Ÿè®¸èƒ½æŸ¥åˆ°äº›ä»€ä¹ˆã€‚",
              options: [
                { text: "å¤ªå¥½äº†ï¼æˆ‘ä»¬å¯ä»¥ä¸€èµ·å»é‚£ä¸ªæ¸¸ä¹å›­é—®é—®çœ‹ã€‚", affectionChange: 5, moodChange: 4 },
                { text: "é—¨ç¥¨ä¸Šæœ‰æ—¥æœŸå—ï¼Ÿä¹Ÿè®¸èƒ½å”¤èµ·æ›´å¤šå›å¿†ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "è¿™ä¹ˆå¤šå¹´è¿‡å»äº†ï¼Œå¯èƒ½æ—©å°±ç‰©æ˜¯äººéäº†ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 5,
              text: "ä¸€ä½è€çˆ·çˆ·è¯´ä»–è§è¿‡ä¸€ä¸ªå’Œæˆ‘æè¿°ç›¸ä¼¼çš„å¥³å­©ï¼Œåœ¨é™„è¿‘çš„å­¤å„¿é™¢å¾…è¿‡ã€‚",
              options: [
                { text: "è¿™æ˜¯ä¸ªé‡è¦çº¿ç´¢ï¼æˆ‘ä»¬æ˜å¤©å°±å»å­¤å„¿é™¢çœ‹çœ‹ã€‚", affectionChange: 5, moodChange: 4 },
                { text: "å¸Œæœ›è¿™æ¬¡èƒ½æœ‰æ”¶è·ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "å­¤å„¿é™¢é‚£ä¹ˆå¤šå­©å­ï¼Œå¯èƒ½å¾ˆéš¾ç¡®è®¤ã€‚", affectionChange: 1, moodChange: 0 }
              ]
            },
            {
              id: 6,
              text: "å­¤å„¿é™¢çš„é™¢é•¿è¯´ç¡®å®æœ‰è¿™æ ·ä¸€ä¸ªå¥³å­©ï¼Œä½†å¥¹å·²ç»è¢«æ”¶å…»äº†ï¼Œä¸çŸ¥é“ç°åœ¨åœ¨å“ªé‡Œã€‚",
              options: [
                { text: "åˆ«ç°å¿ƒï¼Œè‡³å°‘æˆ‘ä»¬çŸ¥é“å¥¹è¿˜æ´»ç€ï¼", affectionChange: 4, moodChange: 3 },
                { text: "æ”¶å…»è®°å½•åº”è¯¥èƒ½æŸ¥åˆ°å¥¹çš„ä¸‹è½å§ï¼Ÿ", affectionChange: 3, moodChange: 2 },
                { text: "çœ‹æ¥åˆè¦é‡æ–°å¼€å§‹å¯»æ‰¾äº†ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 7,
              text: "ï¼ˆçœ¼ä¸­å«ç€æ³ªæ°´ï¼‰æœ‰æ—¶å€™æˆ‘çœŸçš„å¾ˆæƒ³æ”¾å¼ƒï¼Œä½†æˆ‘ä¸èƒ½è®©å¦ˆå¦ˆå¤±æœ›...",
              options: [
                { text: "ä½ å¾ˆåšå¼ºï¼Œæˆ‘ç›¸ä¿¡å¥‡è¿¹ä¸€å®šä¼šå‘ç”Ÿçš„ã€‚", affectionChange: 5, moodChange: 4 },
                { text: "å¯»æ‰¾äº²äººç¡®å®éœ€è¦å¾ˆå¤§çš„è€å¿ƒã€‚", affectionChange: 2, moodChange: 1 },
                { text: "ä¹Ÿè®¸ä½ åº”è¯¥å­¦ä¼šæ”¾ä¸‹è¿‡å»ã€‚", affectionChange: -3, moodChange: -4 }
              ]
            },
            {
              id: 8,
              text: "ï¼ˆçªç„¶æ¿€åŠ¨åœ°æŠ“ä½ä½ çš„æ‰‹ï¼‰é‚£ä¸ªå¥³å­©ï¼å¥¹çš„é”éª¨ä¸‹æ–¹æœ‰è‰è“èƒè®°ï¼",
              options: [
                { text: "åœ¨å“ªé‡Œï¼Ÿæˆ‘ä»¬å¿«å»ç¡®è®¤ä¸€ä¸‹ï¼", affectionChange: 6, moodChange: 5 },
                { text: "ä½ ç¡®å®šæ²¡æœ‰çœ‹é”™å—ï¼Ÿ", affectionChange: 2, moodChange: 1 },
                { text: "ä¹Ÿè®¸åªæ˜¯å·§åˆå‘¢ï¼Ÿ", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 9,
              text: "ï¼ˆæŠ±ç€å¦¹å¦¹ç—›å“­ï¼‰æˆ‘ç»ˆäºæ‰¾åˆ°ä½ äº†ï¼è¿™äº›å¹´ä½ è¿‡å¾—å¥½å—ï¼Ÿ",
              options: [
                { text: "å¤ªå¥½äº†ï¼å§å¦¹ç»ˆäºé‡é€¢äº†ï¼", affectionChange: 8, moodChange: 6 },
                { text: "è¿™çœŸæ˜¯ä¸ªæ„Ÿäººçš„æ—¶åˆ»ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "ç°åœ¨ä½ ä»¬å¯ä»¥é‡æ–°å¼€å§‹äº†ã€‚", affectionChange: 2, moodChange: 1 }
              ]
            }
          ]
        },
        {
          id: 4,
          name: "é£é£å“¥",
          title: "é˜³å…‰å¼€æœ— Â· éŸ³ä¹æ•™å¸ˆ",
          personality: "çƒ­æƒ…æ´‹æº¢ï¼Œå¤šæ‰å¤šè‰ºï¼Œæ¢¦æƒ³ä¸¾åŠä¸ªäººéŸ³ä¹ä¼šå´ç¼ºä¹è‡ªä¿¡ã€‚",
          likes: ["æˆ·å¤–æ´»åŠ¨", "ä¹å™¨", "æ‘„å½±"],
          affection: 0,
          mood: 75,
          isHarem: false,
          currentCostume: 0,
          storyMilestones: [
            { affection: 10, title: "éŸ³ä¹é‚‚é€…", description: "ä½ å¶ç„¶å¬åˆ°é£é£å“¥åœ¨å¼¹å‰ä»–ï¼Œè¢«ä»–çš„éŸ³ä¹å¸å¼•ã€‚" },
            { affection: 20, title: "éŸ³ä¹æ¢¦æƒ³", description: "ä»–å‘Šè¯‰ä½ ä¸€ç›´æ¢¦æƒ³ä¸¾åŠä¸ªäººéŸ³ä¹ä¼šã€‚" },
            { affection: 30, title: "è¿‡å»é˜´å½±", description: "ä»–é€éœ²é«˜ä¸­æ—¶åœ¨æ¯”èµ›ä¸­å¤±è¯¯ï¼Œç•™ä¸‹äº†å¿ƒç†é˜´å½±ã€‚" },
            { affection: 40, title: "é‡æ–°å°è¯•", description: "åœ¨ä½ çš„é¼“åŠ±ä¸‹ï¼Œä»–å¼€å§‹å°è¯•åœ¨å°åœºåˆè¡¨æ¼”ã€‚" },
            { affection: 50, title: "åˆ›ä½œæ‰å", description: "ä½ å‘ç°ä»–åˆ›ä½œçš„æ­Œæ›²éå¸¸åŠ¨äººã€‚" },
            { affection: 60, title: "å°è¯•ç‰›åˆ€", description: "ä»–åœ¨å’–å•¡é¦†çš„å°å‹æ¼”å‡ºè·å¾—äº†å¥½è¯„ã€‚" },
            { affection: 70, title: "ä¿¡å¿ƒé‡å»º", description: "é€šè¿‡ä¸æ–­æ¼”å‡ºï¼Œä»–é€æ¸é‡å»ºäº†ä¿¡å¿ƒã€‚" },
            { affection: 80, title: "éŸ³ä¹ä¼šç­¹å¤‡", description: "ä»–å†³å®šæ­£å¼ç­¹å¤‡ä¸ªäººéŸ³ä¹ä¼šã€‚" },
            { affection: 90, title: "æŒ‘æˆ˜ä¸æˆé•¿", description: "ç­¹å¤‡è¿‡ç¨‹ä¸­é‡åˆ°å¾ˆå¤šå›°éš¾ï¼Œä½†ä»–éƒ½å‹‡æ•¢é¢å¯¹ã€‚" },
            { affection: 100, title: "æ¢¦æƒ³æˆçœŸ", description: "éŸ³ä¹ä¼šæˆåŠŸä¸¾åŠï¼Œä»–çš„éŸ³ä¹æ„ŸåŠ¨äº†æ‰€æœ‰äººã€‚" }
          ],
          costumes: [
            { id: 0, name: "ä¼‘é—²è£…", image: "https://p3-flow-imagex-download-sign.byteimg.com/tos-cn-i-a9rns2rl98/0d90c2dd2c8a4da78ba023a3da191596.png~tplv-a9rns2rl98-24:720:720.jpeg?rcl=202511021920054FFF42CCAC7804EEC2A5&rk3s=8e244e95&rrcfp=8a172a1a&x-expires=1762687205&x-signature=ylMfctaeAa4Vs5yPvVEkgKj0b8M%3D", unlocked: true },
            { id: 1, name: "è¿åŠ¨è£…", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6FFFA'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399E6D4'/%3E%3Cpath d='M30 45 L30 65 L25 65 L25 75 L35 75 L35 65 L30 65 L30 80 L70 80 L70 65 L65 65 L65 75 L75 75 L75 65 L70 65 L70 45 Z' fill='%23FF6347'/%3E%3C/svg%3E", unlocked: false, requirement: 30 },
            { id: 2, name: "æ¼”å‡ºæœ", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F0F8FF'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399E6D4'/%3E%3Cpath d='M30 40 L30 80 L70 80 L70 40 Z' fill='%234682B4'/%3E%3Cpath d='M40 40 L60 40 L55 50 L45 50 Z' fill='%23FFD700'/%3E%3C/svg%3E", unlocked: false, requirement: 60 },
            { id: 3, name: "éŸ³ä¹å®¶", image: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23F5F5F5'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399E6D4'/%3E%3Cpath d='M30 40 L30 80 L70 80 L70 40 L60 40 L60 50 L40 50 L40 40 Z' fill='%23000080'/%3E%3Cpath d='M45 50 L55 50 L55 80 L45 80 Z' fill='%23A52A2A'/%3E%3C/svg%3E", unlocked: false, requirement: 90 }
          ],
          haremImage: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23E6FFFA'/%3E%3Ccircle cx='50' cy='30' r='15' fill='%2399E6D4'/%3E%3Cpath d='M50 50 Q70 70, 50 90 Q30 70, 50 50' fill='%2399E6D4'/%3E%3C/svg%3E",
          dialogues: [
            {
              id: 0,
              text: "å—¨ï¼æˆ‘æ˜¯é£é£å“¥ï¼Œåˆšæ‰çœ‹åˆ°ä½ åœ¨å¬æˆ‘å¼¹ç´ï¼Œæ˜¯ä¸æ˜¯åµåˆ°ä½ äº†ï¼Ÿ",
              options: [
                { text: "æ²¡æœ‰æ²¡æœ‰ï¼Œå¼¹å¾—å¾ˆå¥½å¬ï¼æˆ‘è¢«å¸å¼•äº†ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ä½ å¥½ï¼Œæˆ‘ä¹Ÿå–œæ¬¢éŸ³ä¹ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "è¿˜å¯ä»¥å§ï¼Œä¸ç®—éš¾å¬ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 1,
              text: "è°¢è°¢ï¼æˆ‘æ˜¯é™„è¿‘éŸ³ä¹æ•™å®¤çš„è€å¸ˆï¼Œå¹³æ—¶å–œæ¬¢åœ¨è¿™é‡Œç»ƒä¹ ã€‚ä½ å–œæ¬¢ä»€ä¹ˆç±»å‹çš„éŸ³ä¹ï¼Ÿ",
              options: [
                { text: "æˆ‘å–œæ¬¢æµè¡ŒéŸ³ä¹ï¼Œå¶å°”ä¹Ÿå¬å¤å…¸ä¹ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "æˆ‘å¯¹éŸ³ä¹äº†è§£ä¸å¤šï¼Œä½†å¾ˆå–œæ¬¢å¬ä½ å¼¹çš„ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "æˆ‘ä¸å¤ªæ‡‚éŸ³ä¹ï¼Œåªæ˜¯è·¯è¿‡ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 2,
              text: "å…¶å®æˆ‘ä¸€ç›´åœ¨å†™è‡ªå·±çš„æ­Œï¼Œåªæ˜¯ä»æ¥æ²¡åœ¨äººå‰è¡¨æ¼”è¿‡...æœ‰ç‚¹å®³æ€•ã€‚",
              options: [
                { text: "ä¸ºä»€ä¹ˆï¼Ÿæˆ‘è§‰å¾—ä½ çš„éŸ³ä¹å¾ˆæœ‰æ„ŸæŸ“åŠ›å•Šï¼", affectionChange: 4, moodChange: 3 },
                { text: "å¾ˆå¤šäººéƒ½ä¼šæ€¯åœºï¼Œå¾ˆæ­£å¸¸ã€‚", affectionChange: 2, moodChange: 1 },
                { text: "ä¸æ•¢åœ¨äººå‰è¡¨æ¼”ï¼Œè¿˜åšä»€ä¹ˆéŸ³ä¹è€å¸ˆï¼Ÿ", affectionChange: -3, moodChange: -4 }
              ]
            },
            {
              id: 3,
              text: "é«˜ä¸­æ—¶å‚åŠ éŸ³ä¹æ¯”èµ›ï¼Œæˆ‘åœ¨å°ä¸Šå¿˜è¯äº†ï¼Œå…¨åœºå“„ç¬‘...ä»é‚£ä»¥åå°±æœ‰é˜´å½±äº†ã€‚",
              options: [
                { text: "é‚£ä¸€å®šå¾ˆéš¾å—...ä½†è¿‡å»è¿™ä¹ˆä¹…äº†ï¼Œä½ å·²ç»è¿›æ­¥å¾ˆå¤šäº†ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "è°éƒ½æœ‰å¤±è¯¯çš„æ—¶å€™ï¼Œåˆ«å¤ªåœ¨æ„ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "çœ‹æ¥ä½ å¿ƒç†ç´ è´¨ä¸å¤ªå¥½å•Šã€‚", affectionChange: -2, moodChange: -3 }
              ]
            },
            {
              id: 4,
              text: "å’Œä½ èŠå¤©åï¼Œæˆ‘çªç„¶æœ‰äº†ç‚¹å‹‡æ°”...ä¹Ÿè®¸æœ‰ä¸€å¤©ï¼Œæˆ‘å¯ä»¥è¯•ç€åœ¨å°èŒƒå›´è¡¨æ¼”ä¸€æ¬¡ï¼Ÿ",
              options: [
                { text: "å¤ªæ£’äº†ï¼æˆ‘ä¸€å®šä¼šå»æ”¯æŒä½ ï¼", affectionChange: 5, moodChange: 4 },
                { text: "æˆ‘ç›¸ä¿¡ä½ ä¸€å®šå¯ä»¥çš„ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "å°èŒƒå›´è¡¨æ¼”åº”è¯¥æ²¡é—®é¢˜å§ã€‚", affectionChange: 1, moodChange: 1 }
              ]
            },
            {
              id: 5,
              text: "æˆ‘å†™äº†ä¸€é¦–å…³äºæ¢¦æƒ³å’Œå‹‡æ°”çš„æ­Œï¼Œæƒ³å”±ç»™ä½ å¬å¬...ï¼ˆç´§å¼ åœ°æ“æ‰‹ï¼‰",
              options: [
                { text: "æˆ‘å¾ˆæœŸå¾…ï¼å¿«å”±ç»™æˆ‘å¬å§ã€‚", affectionChange: 4, moodChange: 3 },
                { text: "åˆ«ç´§å¼ ï¼Œæˆ‘ä¼šè®¤çœŸå¬çš„ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ä½ ç¡®å®šå‡†å¤‡å¥½äº†å—ï¼Ÿ", affectionChange: 1, moodChange: 1 }
              ]
            },
            {
              id: 6,
              text: "ï¼ˆå”±å®Œåå®³ç¾åœ°ä½ä¸‹å¤´ï¼‰æ€ä¹ˆæ ·ï¼Ÿæ˜¯ä¸æ˜¯å¾ˆå¹¼ç¨šï¼Ÿ",
              options: [
                { text: "å¤ªæ„Ÿäººäº†ï¼è¿™é¦–æ­ŒçœŸçš„å¾ˆæ£’ï¼", affectionChange: 5, moodChange: 4 },
                { text: "æ­Œè¯å†™å¾—å¾ˆçœŸè¯šï¼Œæˆ‘å¾ˆå–œæ¬¢ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "è¿˜è¡Œå§ï¼Œæ¯”æˆ‘æƒ³è±¡çš„å¥½ä¸€äº›ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 7,
              text: "å’–å•¡é¦†è€æ¿é‚€è¯·æˆ‘å‘¨æœ«å»è¡¨æ¼”ï¼ä½†æˆ‘è¿˜æ˜¯å¾ˆç´§å¼ ...",
              options: [
                { text: "è¿™æ˜¯ä¸ªå¥½æœºä¼šï¼æˆ‘ä¼šå»ç»™ä½ åŠ æ²¹çš„ï¼", affectionChange: 6, moodChange: 5 },
                { text: "ä½ å·²ç»å‡†å¤‡å¥½äº†ï¼Œç›¸ä¿¡è‡ªå·±ï¼", affectionChange: 4, moodChange: 3 },
                { text: "ä¹Ÿè®¸ä½ è¿˜éœ€è¦æ›´å¤šç»ƒä¹ ï¼Ÿ", affectionChange: 1, moodChange: 1 }
              ]
            },
            {
              id: 8,
              text: "ï¼ˆè¡¨æ¼”ç»“æŸåå…´å¥‹åœ°è·‘è¿‡æ¥ï¼‰è§‚ä¼—ä»¬å¾ˆå–œæ¬¢æˆ‘çš„æ­Œï¼ä»–ä»¬è¿˜é¼“æŒäº†ï¼",
              options: [
                { text: "æˆ‘å°±çŸ¥é“ä½ å¯ä»¥çš„ï¼ä½ æ˜¯å¤©ç”Ÿçš„éŸ³ä¹å®¶ï¼", affectionChange: 5, moodChange: 4 },
                { text: "çœ‹åˆ°ä½ è¿™ä¹ˆå¼€å¿ƒï¼Œæˆ‘ä¹Ÿå¾ˆé«˜å…´ã€‚", affectionChange: 3, moodChange: 2 },
                { text: "ä¸€æ¬¡æˆåŠŸä¸ä»£è¡¨ä»€ä¹ˆï¼Œç»§ç»­åŠªåŠ›å§ã€‚", affectionChange: -1, moodChange: -1 }
              ]
            },
            {
              id: 9,
              text: "ï¼ˆçœ¼ä¸­é—ªçƒç€åšå®šçš„å…‰èŠ’ï¼‰æˆ‘å†³å®šä¸¾åŠä¸€åœºçœŸæ­£çš„ä¸ªäººéŸ³ä¹ä¼šï¼ä½ æ„¿æ„åšæˆ‘çš„åˆ¶ä½œäººå—ï¼Ÿ",
              options: [
                { text: "æˆ‘æ„¿æ„ï¼æˆ‘ä»¬ä¸€èµ·åˆ›é€ ä¸€åœºéš¾å¿˜çš„éŸ³ä¹ä¼šï¼", affectionChange: 8, moodChange: 6 },
                { text: "è¿™æ˜¯ä¸ªå¤§èƒ†çš„å†³å®šï¼Œä½†æˆ‘æ”¯æŒä½ ï¼", affectionChange: 4, moodChange: 3 },
                { text: "ä½ ç¡®å®šä¸ä¼šå†æ¬¡æ€¯åœºå—ï¼Ÿ", affectionChange: -2, moodChange: -2 }
              ]
            }
          ]
        }
      ],
      gifts: [
        { id: 0, name: "é²œèŠ±", price: 50, affectionChange: 2, likedBy: [0, 3], reaction: "ä»–/å¥¹æ¥è¿‡é²œèŠ±ï¼Œè„¸ä¸Šéœ²å‡ºäº†å¾®ç¬‘ã€‚" },
        { id: 1, name: "å·§å…‹åŠ›", price: 80, affectionChange: 3, likedBy: [0, 3], reaction: "ä»–/å¥¹çœ‹åˆ°å·§å…‹åŠ›ï¼Œçœ¼ç›ä¸€äº®ã€‚" },
        { id: 2, name: "ä¹¦ç±", price: 100, affectionChange: 4, likedBy: [0], reaction: "ä»–/å¥¹å¯¹è¿™æœ¬ä¹¦å¾ˆæ„Ÿå…´è¶£ï¼Œç¿»çœ‹äº†å‡ é¡µã€‚" },
        { id: 3, name: "å’–å•¡", price: 50, affectionChange: 3, likedBy: [0], reaction: "ä»–/å¥¹æ¥è¿‡å’–å•¡ï¼Œé—»äº†é—»ï¼Œéœ²å‡ºæ»¡æ„çš„è¡¨æƒ…ã€‚" },
        { id: 4, name: "è¿åŠ¨æ‰‹ç¯", price: 200, affectionChange: 5, likedBy: [1], reaction: "ä»–/å¥¹å¯¹è¿™ä¸ªè¿åŠ¨æ‰‹ç¯å¾ˆæ„Ÿå…´è¶£ï¼Œç«‹åˆ»æˆ´åœ¨äº†æ‰‹ä¸Šã€‚" },
        { id: 5, name: "æ¸¸æˆæ‰‹æŸ„", price: 300, affectionChange: 6, likedBy: [1], reaction: "ä»–/å¥¹çœ‹åˆ°æ¸¸æˆæ‰‹æŸ„ï¼Œå…´å¥‹åœ°é—®ä½ è¦ä¸è¦ä¸€èµ·ç©ã€‚" },
        { id: 6, name: "çº¢é…’", price: 500, affectionChange: 8, likedBy: [2], reaction: "ä»–/å¥¹å¯¹çº¢é…’å¾ˆæœ‰ç ”ç©¶ï¼Œå’Œä½ èŠäº†å¾ˆå¤šå…³äºçº¢é…’çš„çŸ¥è¯†ã€‚" },
        { id: 7, name: "ä¹¦æ³•å¥—è£…", price: 300, affectionChange: 7, likedBy: [2], reaction: "ä»–/å¥¹çœ‹åˆ°ä¹¦æ³•å¥—è£…ï¼Œèµèµåœ°çœ‹ç€ä½ ã€‚" },
        { id: 8, name: "æ‰‹å·¥è›‹ç³•", price: 150, affectionChange: 5, likedBy: [3], reaction: "ä»–/å¥¹å°äº†ä¸€å£è›‹ç³•ï¼Œå¼€å¿ƒåœ°ç¬‘äº†èµ·æ¥ã€‚" },
        { id: 9, name: "çŒ«å’ªç©å¶", price: 100, affectionChange: 4, likedBy: [3], reaction: "ä»–/å¥¹æŠ±ç€çŒ«å’ªç©å¶ï¼Œçœ‹èµ·æ¥å¾ˆå¼€å¿ƒã€‚" },
        { id: 10, name: "ç™»å±±åŒ…", price: 400, affectionChange: 6, likedBy: [4], reaction: "ä»–/å¥¹å¯¹ç™»å±±åŒ…å¾ˆæ»¡æ„ï¼Œè¯´ä¸‹æ¬¡æˆ·å¤–æ´»åŠ¨å¯ä»¥ç”¨ä¸Šã€‚" },
        { id: 11, name: "ç›¸æœº", price: 1000, affectionChange: 10, likedBy: [4], reaction: "ä»–/å¥¹çœ‹åˆ°ç›¸æœºï¼Œæ¿€åŠ¨åœ°è¯´è¿™æ˜¯ä»–/å¥¹ä¸€ç›´æƒ³è¦çš„å‹å·ã€‚" }
      ],
      dates: [
        { id: 0, name: "ç”µå½±é™¢", price: 100, time: 2, likedBy: [0, 3], description: "ä¸€èµ·å»çœ‹æœ€æ–°ä¸Šæ˜ çš„ç”µå½±", reactions: {
          like: "ä»–/å¥¹çœ‹å¾—å¾ˆæŠ•å…¥ï¼Œå¶å°”ä¼šå’Œä½ åˆ†äº«è§‚åæ„Ÿã€‚",
          dislike: "ä»–/å¥¹çœ‹èµ·æ¥å¯¹è¿™éƒ¨ç”µå½±ä¸å¤ªæ„Ÿå…´è¶£ï¼Œæœ‰äº›èµ°ç¥ã€‚"
        }},
        { id: 1, name: "å…¬å›­æ•£æ­¥", price: 50, time: 1, likedBy: [0, 4], description: "åœ¨å…¬å›­æ•£æ­¥ï¼Œäº«å—å¤§è‡ªç„¶çš„ç¾æ™¯", reactions: {
          like: "ä»–/å¥¹å¾ˆäº«å—æ•£æ­¥çš„æ—¶å…‰ï¼Œå’Œä½ èŠäº†å¾ˆå¤šè¯é¢˜ã€‚",
          dislike: "ä»–/å¥¹çœ‹èµ·æ¥æœ‰äº›ç´¯ï¼Œä¸å¤ªé€‚åº”é•¿æ—¶é—´çš„æ­¥è¡Œã€‚"
        }},
        { id: 2, name: "å¥èº«æˆ¿", price: 150, time: 2, likedBy: [1], description: "ä¸€èµ·å»å¥èº«æˆ¿é”»ç‚¼", reactions: {
          like: "ä»–/å¥¹åœ¨å¥èº«æˆ¿é‡Œè¡¨ç°å‡ºè‰²ï¼Œè¿˜æŒ‡å¯¼äº†ä½ ä¸€äº›åŠ¨ä½œã€‚",
          dislike: "ä»–/å¥¹çœ‹èµ·æ¥ä¸å¤ªä¹ æƒ¯åœ¨åˆ«äººé¢å‰é”»ç‚¼ã€‚"
        }},
        { id: 3, name: "ç¾æœ¯é¦†", price: 80, time: 2, likedBy: [0, 2], description: "å‚è§‚æœ€æ–°çš„è‰ºæœ¯å±•è§ˆ", reactions: {
          like: "ä»–/å¥¹å¯¹è‰ºæœ¯å¾ˆæœ‰è§è§£ï¼Œç»™ä½ è®²è§£äº†å¾ˆå¤šä½œå“çš„èƒŒæ™¯ã€‚",
          dislike: "ä»–/å¥¹å¯¹è‰ºæœ¯ä¸å¤ªæ„Ÿå…´è¶£ï¼Œåªæ˜¯éšä¾¿çœ‹çœ‹ã€‚"
        }},
        { id: 4, name: "éŸ³ä¹ä¼š", price: 200, time: 3, likedBy: [0, 4], description: "è†å¬é«˜é›…çš„éŸ³ä¹ä¼š", reactions: {
          like: "ä»–/å¥¹å¬å¾—å¾ˆå…¥è¿·ï¼Œç»“æŸåè¿˜å’Œä½ è®¨è®ºäº†å¾ˆä¹…ã€‚",
          dislike: "ä»–/å¥¹çœ‹èµ·æ¥ä¸å¤ªé€‚åº”è¿™ç§åœºåˆï¼Œæœ‰äº›åç«‹ä¸å®‰ã€‚"
        }},
        { id: 5, name: "é¤å…", price: 300, time: 2, likedBy: [2, 3], description: "åœ¨é«˜æ¡£é¤å…äº«ç”¨ç¾é£Ÿ", reactions: {
          like: "ä»–/å¥¹å¯¹è¿™é‡Œçš„é£Ÿç‰©å¾ˆæ»¡æ„ï¼Œå°¤å…¶å–œæ¬¢æŸé“èœã€‚",
          dislike: "ä»–/å¥¹çœ‹èµ·æ¥å¯¹è¿™é‡Œçš„é£Ÿç‰©ä¸å¤ªä¹ æƒ¯ã€‚"
        }},
        { id: 6, name: "é…’åº—", price: 1000, time: 1, likedBy: [0, 1, 2, 3, 4], description: "åœ¨è±ªåé…’åº—å…±åº¦æµªæ¼«å¤œæ™š", reactions: {
          like: "ä»–/å¥¹è„¸é¢Šå¾®çº¢ï¼Œç¾æ¶©åœ°ç‚¹äº†ç‚¹å¤´ï¼Œçœ¼ä¸­é—ªçƒç€æœŸå¾…çš„å…‰èŠ’ã€‚",
          dislike: "ä»–/å¥¹çŠ¹è±«äº†ä¸€ä¸‹ï¼Œä½†æœ€ç»ˆè¿˜æ˜¯åŒæ„äº†ä½ çš„é‚€è¯·ã€‚"
        }, requiresAffection: 60, specialEffect: "blushMode" }
      ],
      jobs: [
        { id: 0, name: "å¿«é¤åº—å…¼èŒ", pay: 50, time: 1, description: "ç®€å•çš„ä½“åŠ›åŠ³åŠ¨ï¼Œæ”¶å…¥ä¸é«˜ä½†ç¨³å®šã€‚" },
        { id: 1, name: "å®¶æ•™", pay: 100, time: 2, description: "è¾…å¯¼å­¦ç”ŸåŠŸè¯¾ï¼Œéœ€è¦ä¸€å®šçš„çŸ¥è¯†æ°´å¹³ã€‚" },
        { id: 2, name: "è‡ªç”±èŒä¸š", pay: 200, time: 3, description: "æ¥ä¸€äº›è®¾è®¡æˆ–å†™ä½œçš„æ´»å„¿ï¼Œæ”¶å…¥è¾ƒé«˜ä½†ä¸ç¨³å®šã€‚" }
      ],
      events: [
        { id: 0, name: "å¤©æ°”æ™´æœ—", effect: { moodChange: 5 }, description: "ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œå¿ƒæƒ…ä¹Ÿè·Ÿç€å˜å¥½ã€‚" },
        { id: 1, name: "å¶é‡æ—§å‹", effect: { affectionChange: 3 }, description: "åœ¨è·¯ä¸Šé‡åˆ°äº†è€æœ‹å‹ï¼ŒèŠå¾—å¾ˆå¼€å¿ƒã€‚" },
        { id: 2, name: "æ”¶åˆ°ç¤¼ç‰©", effect: { moneyChange: 100 }, description: "æ„å¤–æ”¶åˆ°äº†ä¸€ä»½ç¤¼ç‰©ï¼Œé‡Œé¢æœ‰ä¸€äº›é›¶èŠ±é’±ã€‚" },
        { id: 3, name: "å¿ƒæƒ…ä½è½", effect: { moodChange: -10 }, description: "ä»Šå¤©å¿ƒæƒ…ä¸å¤ªå¥½ï¼Œåšä»€ä¹ˆéƒ½æä¸èµ·ç²¾ç¥ã€‚" },
        { id: 4, name: "å¹¸è¿æ—¥", effect: { luck: true }, description: "ä»Šå¤©æ„Ÿè§‰ç‰¹åˆ«å¹¸è¿ï¼Œåšä»€ä¹ˆéƒ½å¾ˆé¡ºåˆ©ã€‚" }
      ]
    };
    
    // æ¸¸æˆçŠ¶æ€
    const gameState = {
      currentDialogueId: 0,
      currentSection: 'dialog', // 'dialog', 'gift', 'work', 'date', 'diary', 'propose', 'costume'
      lastEventDay: 0
    };
    
    // DOM å…ƒç´ ç¼“å­˜
    const elements = {
      // é¡µé¢å…ƒç´ 
      pages: {
        characterSelection: document.getElementById('character-selection-page'),
        characterInteraction: document.getElementById('character-interaction-page'),
        ending: document.getElementById('ending-page'),
        resetConfirmation: document.getElementById('reset-confirmation-page')
      },
      
      // è§’è‰²ä¿¡æ¯å…ƒç´ 
      character: {
        detailImage: document.getElementById('character-detail-image'),
        detailName: document.getElementById('character-detail-name'),
        detailTitle: document.getElementById('character-detail-title'),
        affectionValue: document.getElementById('affection-value'),
        affectionBar: document.getElementById('affection-bar'),
        moodValue: document.getElementById('mood-value'),
        moodBar: document.getElementById('mood-bar'),
        personality: document.getElementById('character-personality'),
        cardWrapper: document.getElementById('character-card-wrapper'),
        haremIndicator: document.getElementById('harem-indicator'),
        storyMilestones: document.getElementById('story-milestones'),
        clues: document.getElementById('character-clues')
      },
      
      // åŠŸèƒ½åŒºåŸŸ
      sections: {
        dialog: document.getElementById('dialog-section'),
        gift: document.getElementById('gift-section'),
        work: document.getElementById('work-section'),
        date: document.getElementById('date-section'),
        diary: document.getElementById('diary-section'),
        propose: document.getElementById('propose-section'),
        costume: document.getElementById('costume-section')
      },
      
      // å¯¹è¯å…ƒç´ 
      dialog: {
        container: document.getElementById('dialog-container'),
        options: document.getElementById('dialog-options')
      },
      
      // UI å…ƒç´ 
      ui: {
        moneyDisplay: document.getElementById('money-display'),
        dayDisplay: document.getElementById('day-display'),
        backToSelectionBtn: document.getElementById('back-to-selection'),
        giftBtn: document.getElementById('gift-btn'),
        workBtn: document.getElementById('work-btn'),
        dateBtn: document.getElementById('date-btn'),
        diaryBtn: document.getElementById('diary-btn'),
        costumeBtn: document.getElementById('costume-btn'),
        proposeBtn: document.getElementById('propose-btn'),
        proposeCharacterName: document.getElementById('propose-character-name'),
        acceptPropose: document.getElementById('accept-propose'),
        cancelPropose: document.getElementById('cancel-propose'),
        blushModeIndicator: document.getElementById('blush-mode-indicator'),
        blushDays: document.getElementById('blush-days'),
        weekIndicator: document.getElementById('week-indicator'),
        haremSection: document.getElementById('harem-section'),
        haremContainer: document.getElementById('harem-container'),
        continueGameBtn: document.getElementById('continue-game'),
        resetBtn: document.getElementById('reset-btn'),
        confirmReset: document.getElementById('confirm-reset'),
        cancelReset: document.getElementById('cancel-reset'),
        costumeContainer: document.getElementById('costume-container'),
        diaryClues: document.getElementById('diary-clues'),
        diaryInteractions: document.getElementById('diary-interactions'),
        endingImage: document.getElementById('ending-image'),
        endingTitle: document.getElementById('ending-title'),
        endingDescription: document.getElementById('ending-description'),
        notificationContainer: document.getElementById('notification-container')
      }
    };
    
    // åˆå§‹åŒ–æ¸¸æˆ
    function initGame() {
      loadGame();
      updateUI();
      addEventListeners();
      generateDailyFortune();
    }
    
    // åŠ è½½æ¸¸æˆæ•°æ®
    function loadGame() {
      const savedData = localStorage.getItem('loveSimulationGame');
      if (savedData) {
        const parsedData = JSON.parse(savedData);
        // æ¢å¤åŸºæœ¬æ•°æ®
        gameData.money = parsedData.money;
        gameData.day = parsedData.day;
        gameData.currentCharacter = parsedData.currentCharacter;
        gameData.clues = parsedData.clues || [];
        gameData.interactions = parsedData.interactions || [];
        gameData.blushMode = parsedData.blushMode || { active: false, daysRemaining: 0, characterId: -1 };
        gameData.harem = parsedData.harem || [];
        gameData.week = parsedData.week || 1;
        
        // æ¢å¤è§’è‰²æ•°æ®
        for (let i = 0; i < gameData.characters.length; i++) {
          if (parsedData.characters && parsedData.characters[i]) {
            gameData.characters[i].affection = parsedData.characters[i].affection;
            gameData.characters[i].mood = parsedData.characters[i].mood || 70;
            gameData.characters[i].isHarem = parsedData.characters[i].isHarem || false;
            gameData.characters[i].currentCostume = parsedData.characters[i].currentCostume || 0;
            
            // æ¢å¤æœè£…è§£é”çŠ¶æ€
            if (parsedData.characters[i].costumes) {
              for (let j = 0; j < gameData.characters[i].costumes.length; j++) {
                if (parsedData.characters[i].costumes[j]) {
                  gameData.characters[i].costumes[j].unlocked = parsedData.characters[i].costumes[j].unlocked || false;
                }
              }
            }
          }
        }
      } else {
        // åˆå§‹åŒ–æœè£…è§£é”çŠ¶æ€
        gameData.characters.forEach(character => {
          character.costumes.forEach(costume => {
            costume.unlocked = costume.id === 0; // åªæœ‰åˆå§‹æœè£…è§£é”
          });
        });
      }
      
      // æ›´æ–°åå®«å¾½ç« å’Œå±•ç¤º
      updateHaremBadges();
      updateHaremDisplay();
      
      // å¦‚æœæœ‰å½“å‰è§’è‰²ï¼Œæ˜¾ç¤ºäº’åŠ¨é¡µé¢
      if (gameData.currentCharacter !== null) {
        showCharacterInteractionPage(gameData.currentCharacter);
      }
    }
    
    // ä¿å­˜æ¸¸æˆæ•°æ®
    function saveGame() {
      const dataToSave = {
        money: gameData.money,
        day: gameData.day,
        currentCharacter: gameData.currentCharacter,
        clues: gameData.clues,
        interactions: gameData.interactions,
        blushMode: gameData.blushMode,
        harem: gameData.harem,
        week: gameData.week,
        characters: gameData.characters.map(character => ({
          id: character.id,
          affection: character.affection,
          mood: character.mood,
          isHarem: character.isHarem,
          currentCostume: character.currentCostume,
          costumes: character.costumes.map(costume => ({
            id: costume.id,
            unlocked: costume.unlocked
          }))
        }))
      };
      
      localStorage.setItem('loveSimulationGame', JSON.stringify(dataToSave));
    }
    
    // é‡ç½®æ¸¸æˆ
    function resetGame() {
      localStorage.removeItem('loveSimulationGame');
      
      // é‡ç½®æ¸¸æˆæ•°æ®
      gameData.money = 500;
      gameData.day = 1;
      gameData.currentCharacter = null;
      gameData.clues = [];
      gameData.interactions = [];
      gameData.blushMode = { active: false, daysRemaining: 0, characterId: -1 };
      gameData.harem = [];
      gameData.week = 1;
      
      // é‡ç½®è§’è‰²æ•°æ®
      gameData.characters.forEach(character => {
        character.affection = 0;
        character.mood = 70;
        character.isHarem = false;
        character.currentCostume = 0;
        character.costumes.forEach(costume => {
          costume.unlocked = costume.id === 0;
        });
      });
      
      // æ›´æ–°UIå’Œåå®«æ˜¾ç¤º
      updateUI();
      updateHaremBadges();
      updateHaremDisplay();
      
      // æ˜¾ç¤ºè§’è‰²é€‰æ‹©é¡µé¢
      showCharacterSelectionPage();
      
      // éšè—é‡ç½®ç¡®è®¤é¡µé¢
      elements.pages.resetConfirmation.classList.add('hidden');
    }
    
    // æ›´æ–°UI
    function updateUI() {
      // æ›´æ–°é‡‘é’±å’Œæ—¥æœŸ
      elements.ui.moneyDisplay.textContent = gameData.money;
      elements.ui.dayDisplay.textContent = gameData.day;
      
      // æ›´æ–°å‘¨ç›®æŒ‡ç¤ºå™¨
      if (gameData.week > 1) {
        elements.ui.weekIndicator.textContent = `${gameData.week}å‘¨ç›®`;
        elements.ui.weekIndicator.classList.remove('hidden');
      } else {
        elements.ui.weekIndicator.classList.add('hidden');
      }
      
      // æ›´æ–°çº¢æ¶¦æ¨¡å¼æŒ‡ç¤ºå™¨
      if (gameData.blushMode.active && gameData.blushMode.characterId === gameData.currentCharacter) {
        elements.ui.blushModeIndicator.classList.remove('hidden');
        elements.ui.blushDays.textContent = `${gameData.blushMode.daysRemaining}å¤©`;
        elements.character.cardWrapper.classList.add('blush-mode');
      } else {
        elements.ui.blushModeIndicator.classList.add('hidden');
        elements.character.cardWrapper.classList.remove('blush-mode');
      }
      
      // æ›´æ–°å½“å‰è§’è‰²ä¿¡æ¯
      if (gameData.currentCharacter !== null) {
        const character = gameData.characters[gameData.currentCharacter];
        elements.character.affectionValue.textContent = `${character.affection}/100`;
        elements.character.affectionBar.style.width = `${character.affection}%`;
        
        // æ›´æ–°å¿ƒæƒ…å€¼
        updateMoodDisplay(character);
        
        // æ›´æ–°æ•…äº‹é‡Œç¨‹ç¢‘å’Œçº¿ç´¢
        updateStoryMilestones(character);
        updateCharacterClues();
        
        // æ›´æ–°æœè£…è§£é”çŠ¶æ€
        updateCostumeUnlocks(character);
        
        // æ›´æ–°æ±‚å©šæŒ‰é’®æ˜¾ç¤º
        elements.ui.proposeBtn.classList.toggle('hidden', !(character.affection >= 100 && !character.isHarem));
        
        // æ›´æ–°åå®«æŒ‡ç¤ºå™¨
        elements.character.haremIndicator.classList.toggle('hidden', !character.isHarem);
      }
    }
    
    // æ›´æ–°å¿ƒæƒ…å€¼æ˜¾ç¤º
    function updateMoodDisplay(character) {
      let moodText = '';
      let moodColor = '';
      
      if (character.mood >= 80) {
        moodText = 'éå¸¸å¼€å¿ƒ';
        moodColor = 'bg-green-500';
      } else if (character.mood >= 60) {
        moodText = 'è‰¯å¥½';
        moodColor = 'bg-blue-500';
      } else if (character.mood >= 40) {
        moodText = 'ä¸€èˆ¬';
        moodColor = 'bg-yellow-500';
      } else if (character.mood >= 20) {
        moodText = 'ä½è½';
        moodColor = 'bg-orange-500';
      } else {
        moodText = 'å¾ˆå·®';
        moodColor = 'bg-red-500';
      }
      
      elements.character.moodValue.textContent = moodText;
      elements.character.moodBar.className = `status-fill ${moodColor}`;
      elements.character.moodBar.style.width = `${character.mood}%`;
    }
    
    // æ›´æ–°æ•…äº‹é‡Œç¨‹ç¢‘
    function updateStoryMilestones(character) {
      elements.character.storyMilestones.innerHTML = '';
      
      // ç­›é€‰å·²è¾¾æˆå’Œæœªè¾¾æˆçš„é‡Œç¨‹ç¢‘
      const achieved = character.storyMilestones.filter(m => character.affection >= m.affection);
      const upcoming = character.storyMilestones.filter(m => character.affection < m.affection);
      
      // æ˜¾ç¤ºå·²è¾¾æˆçš„é‡Œç¨‹ç¢‘
      achieved.forEach(milestone => {
        const el = document.createElement('div');
        el.className = 'story-milestone';
        el.innerHTML = `
          <div class="font-bold text-sm">${milestone.title}</div>
          <div class="text-xs text-gray-600">${milestone.description}</div>
        `;
        elements.character.storyMilestones.appendChild(el);
      });
      
      // æ˜¾ç¤ºä¸‹ä¸€ä¸ªæœªè¾¾æˆçš„é‡Œç¨‹ç¢‘
      if (upcoming.length > 0) {
        const next = upcoming[0];
        const el = document.createElement('div');
        el.className = 'bg-gray-50 border-l-4 border-gray-300 p-4 rounded-r-lg text-sm';
        el.innerHTML = `
          <div class="font-bold text-gray-600">ä¸‹ä¸€é˜¶æ®µ</div>
          <div class="text-xs text-gray-500">å¥½æ„Ÿåº¦è¾¾åˆ°${next.affection}è§£é”: ${next.title}</div>
        `;
        elements.character.storyMilestones.appendChild(el);
      }
    }
    
    // æ›´æ–°è§’è‰²çº¿ç´¢
    function updateCharacterClues() {
      elements.character.clues.innerHTML = '';
      
      if (gameData.clues.length === 0) {
        elements.character.clues.innerHTML = `
          <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">æš‚æ— çº¿ç´¢</span>
        `;
        return;
      }
      
      // ç­›é€‰å½“å‰è§’è‰²çš„çº¿ç´¢
      const characterClues = gameData.clues.filter(clue => clue.characterId === gameData.currentCharacter);
      
      if (characterClues.length === 0) {
        elements.character.clues.innerHTML = `
          <span class="bg-gray-100 text-gray-800 text-xs px-2 py-1 rounded">æš‚æ— çº¿ç´¢</span>
        `;
      } else {
        characterClues.forEach(clue => {
          const el = document.createElement('span');
          el.className = 'bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded';
          el.textContent = clue.text;
          elements.character.clues.appendChild(el);
        });
      }
    }
    
    // æ›´æ–°æœè£…è§£é”çŠ¶æ€
    function updateCostumeUnlocks(character) {
      character.costumes.forEach(costume => {
        if (!costume.unlocked && character.affection >= costume.requirement) {
          costume.unlocked = true;
          showNotification(`æœè£…è§£é”ï¼${character.name}çš„"${costume.name}"å·²è§£é”`, 'success');
        }
      });
    }
    
    // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
    function addEventListeners() {
      // è§’è‰²é€‰æ‹©æŒ‰é’®
      document.querySelectorAll('.startæ”»ç•¥-btn').forEach(button => {
        button.addEventListener('click', () => {
          const characterId = parseInt(button.dataset.character);
          showCharacterInteractionPage(characterId);
        });
      });
      
      // è¿”å›è§’è‰²åˆ—è¡¨
      elements.ui.backToSelectionBtn.addEventListener('click', showCharacterSelectionPage);
      
      // åŠŸèƒ½æŒ‰é’®
      elements.ui.giftBtn.addEventListener('click', () => {
        showSection('gift');
        renderGiftSection();
      });
      
      elements.ui.workBtn.addEventListener('click', () => {
        showSection('work');
        renderWorkSection();
      });
      
      elements.ui.dateBtn.addEventListener('click', () => {
        showSection('date');
        renderDateSection();
      });
      
      elements.ui.costumeBtn.addEventListener('click', () => {
        showSection('costume');
        renderCostumeSection();
      });
      
      elements.ui.diaryBtn.addEventListener('click', () => {
        showSection('diary');
        updateDiary();
      });
      
      // æ±‚å©šç›¸å…³
      elements.ui.proposeBtn.addEventListener('click', () => {
        if (gameData.currentCharacter !== null) {
          const character = gameData.characters[gameData.currentCharacter];
          elements.ui.proposeCharacterName.textContent = character.name;
          showSection('propose');
        }
      });
      
      elements.ui.acceptPropose.addEventListener('click', () => {
        if (gameData.currentCharacter !== null) {
          const characterId = gameData.currentCharacter;
          const character = gameData.characters[characterId];
          
          // æ ‡è®°ä¸ºåå®«æˆå‘˜
          character.isHarem = true;
          if (!gameData.harem.includes(characterId)) {
            gameData.harem.push(characterId);
          }
          
          // æ›´æ–°å¤´åƒä¸ºåå®«ä¸“å±å¤´åƒ
          elements.character.detailImage.src = character.haremImage;
          
          // æ˜¾ç¤ºç»“å±€é¡µé¢
          showEndingPage();
        }
      });
      
      elements.ui.cancelPropose.addEventListener('click', () => showSection('dialog'));
      
      // ç»§ç»­æ¸¸æˆï¼ˆä»ç»“å±€é¡µé¢ï¼‰
      elements.ui.continueGameBtn.addEventListener('click', () => {
        // è¿›å…¥ä¸‹ä¸€å‘¨ç›®
        gameData.week++;
        
        // é‡ç½®å½“å‰è§’è‰²å’Œå¤©æ•°ï¼Œä½†ä¿ç•™é‡‘é’±å’Œåå®«
        gameData.currentCharacter = null;
        gameData.day = 1;
        
        // é‡ç½®å…¶ä»–è§’è‰²çš„å¥½æ„Ÿåº¦
        gameData.characters.forEach(character => {
          if (!character.isHarem) {
            character.affection = 0;
            character.mood = 70;
          }
        });
        
        // é‡ç½®çº¿ç´¢å’Œäº’åŠ¨
        gameData.clues = [];
        gameData.interactions = [];
        
        // é‡ç½®çº¢æ¶¦æ¨¡å¼
        gameData.blushMode = { active: false, daysRemaining: 0, characterId: -1 };
        
        // ä¿å­˜æ¸¸æˆå¹¶æ›´æ–°æ˜¾ç¤º
        saveGame();
        updateHaremBadges();
        updateHaremDisplay();
        showCharacterSelectionPage();
        
        showNotification(`æ­å–œè¿›å…¥ç¬¬${gameData.week}å‘¨ç›®ï¼æ‰€æœ‰åå®«æˆå‘˜å°†ä¿ç•™ã€‚`, 'success');
      });
      
      // é‡ç½®æ¸¸æˆç›¸å…³
      elements.ui.resetBtn.addEventListener('click', () => {
        elements.pages.resetConfirmation.classList.remove('hidden');
      });
      
      elements.ui.confirmReset.addEventListener('click', resetGame);
      elements.ui.cancelReset.addEventListener('click', () => {
        elements.pages.resetConfirmation.classList.add('hidden');
      });
    }
    
    // æ˜¾ç¤ºè§’è‰²é€‰æ‹©é¡µé¢
    function showCharacterSelectionPage() {
      hideAllPages();
      elements.pages.characterSelection.classList.remove('hidden');
      gameData.currentCharacter = null;
      saveGame();
    }
    
    // æ˜¾ç¤ºè§’è‰²äº’åŠ¨é¡µé¢
    function showCharacterInteractionPage(characterId) {
      hideAllPages();
      elements.pages.characterInteraction.classList.remove('hidden');
      
      gameData.currentCharacter = characterId;
      const character = gameData.characters[characterId];
      
      // æ›´æ–°è§’è‰²ä¿¡æ¯
      const currentCostume = character.costumes[character.currentCostume];
      elements.character.detailImage.src = character.isHarem ? character.haremImage : currentCostume.image;
      elements.character.detailName.textContent = character.name;
      elements.character.detailTitle.textContent = character.title;
      elements.character.affectionValue.textContent = `${character.affection}/100`;
      elements.character.affectionBar.style.width = `${character.affection}%`;
      elements.character.personality.textContent = character.personality;
      
      // æ›´æ–°å¿ƒæƒ…å€¼æ˜¾ç¤º
      updateMoodDisplay(character);
      
      // æ›´æ–°çº¿ç´¢å’Œæ•…äº‹é‡Œç¨‹ç¢‘
      updateCharacterClues();
      updateStoryMilestones(character);
      
      // æ˜¾ç¤ºå¯¹è¯åŒºåŸŸ
      showSection('dialog');
      renderDialogSection();
      
      // ä¿å­˜æ¸¸æˆ
      saveGame();
    }
    
    // æ˜¾ç¤ºç»“å±€é¡µé¢
    function showEndingPage() {
      hideAllPages();
      elements.pages.ending.classList.remove('hidden');
      
      // æ›´æ–°ç»“å±€ä¿¡æ¯
      const character = gameData.characters[gameData.currentCharacter];
      elements.ui.endingImage.src = character.haremImage;
      elements.ui.endingTitle.textContent = `${character.name}åŠ å…¥åå®«`;
      elements.ui.endingDescription.textContent = `æ­å–œï¼ä½ æˆåŠŸæ”»ç•¥äº†${character.name}ï¼Œå®Œæˆäº†ä»–/å¥¹çš„æ•…äº‹ã€‚ç°åœ¨å¯ä»¥ç»§ç»­æ”»ç•¥å…¶ä»–è§’è‰²äº†ã€‚`;
    }
    
    // éšè—æ‰€æœ‰é¡µé¢
    function hideAllPages() {
      Object.values(elements.pages).forEach(page => {
        page.classList.add('hidden');
      });
    }
    
    // æ˜¾ç¤ºæŒ‡å®šåŒºåŸŸ
    function showSection(section) {
      // éšè—æ‰€æœ‰åŒºåŸŸ
      Object.values(elements.sections).forEach(sec => {
        sec.classList.add('hidden');
      });
      
      // æ˜¾ç¤ºæŒ‡å®šåŒºåŸŸ
      elements.sections[section].classList.remove('hidden');
      gameState.currentSection = section;
    }
    
    // æ¸²æŸ“å¯¹è¯åŒºåŸŸ
    function renderDialogSection() {
      const character = gameData.characters[gameData.currentCharacter];
      const dialogue = character.dialogues[gameState.currentDialogueId];
      
      // æ¸…ç©ºå¯¹è¯å®¹å™¨
      elements.dialog.container.innerHTML = '';
      
      // æ·»åŠ å¯¹è¯å†…å®¹
      const dialogueBox = document.createElement('div');
      dialogueBox.className = 'dialog-box';
      dialogueBox.innerHTML = `
        <div class="flex items-start">
          <img src="${character.isHarem ? character.haremImage : character.costumes[character.currentCostume].image}" 
               alt="${character.name}" class="w-12 h-12 rounded-full object-cover mr-3">
          <div>
            <div class="flex items-center mb-1">
              <span class="font-bold mr-2">${character.name}</span>
              <span class="text-xs text-gray-500">${gameData.day}å¤©</span>
            </div>
            <p>${dialogue.text}</p>
          </div>
        </div>
      `;
      elements.dialog.container.appendChild(dialogueBox);
      
      // æ»šåŠ¨åˆ°åº•éƒ¨
      elements.dialog.container.scrollTop = elements.dialog.container.scrollHeight;
      
      // æ·»åŠ å¯¹è¯é€‰é¡¹
      elements.dialog.options.innerHTML = '';
      dialogue.options.forEach((option, index) => {
        const button = document.createElement('button');
        button.className = 'btn-outline text-left';
        button.textContent = option.text;
        button.addEventListener('click', () => handleDialogOption(character, option));
        elements.dialog.options.appendChild(button);
      });
    }
    
    // å¤„ç†å¯¹è¯é€‰é¡¹
    function handleDialogOption(character, option) {
      // è®¡ç®—å¥½æ„Ÿåº¦å˜åŒ–ï¼ˆè€ƒè™‘çº¢æ¶¦æ¨¡å¼ï¼‰
      let affectionChange = option.affectionChange;
      if (gameData.blushMode.active && gameData.blushMode.characterId === gameData.currentCharacter) {
        affectionChange *= 2;
      }
      
      // æ›´æ–°å¥½æ„Ÿåº¦
      character.affection += affectionChange;
      character.affection = Math.max(0, Math.min(100, character.affection));
      
      // æ›´æ–°å¿ƒæƒ…å€¼
      character.mood += option.moodChange || 0;
      character.mood = Math.max(0, Math.min(100, character.mood));
      
      // è®°å½•äº’åŠ¨
      recordInteraction(`å¯¹è¯ä¸­é€‰æ‹©äº†"${option.text}"`, character.name, affectionChange);
      
      // æ ¹æ®é€‰é¡¹å†…å®¹æä¾›çº¿ç´¢
      provideClueBasedOnDialogue(character.id, option.text, option.affectionChange);
      
      // å‡å°‘çº¢æ¶¦æ¨¡å¼å¤©æ•°
      updateBlushMode();
      
      // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¯¹è¯
      gameState.currentDialogueId = (gameState.currentDialogueId + 1) % character.dialogues.length;
      
      // å¢åŠ å¤©æ•°
      gameData.day++;
      
      // æ£€æŸ¥æ˜¯å¦è¾¾æˆæ–°çš„æ•…äº‹é‡Œç¨‹ç¢‘
      checkStoryMilestoneAchievement(character);
      
      // éšæœºè§¦å‘äº‹ä»¶
      if (Math.random() > 0.7 && gameData.day > gameState.lastEventDay + 2) {
        triggerRandomEvent();
        gameState.lastEventDay = gameData.day;
      }
      
      // ç”Ÿæˆæ–°çš„æ¯æ—¥è¿åŠ¿
      generateDailyFortune();
      
      // ä¿å­˜å¹¶æ›´æ–°
      saveGame();
      updateUI();
      renderDialogSection();
    }
    
    // æ£€æŸ¥æ˜¯å¦è¾¾æˆæ–°çš„æ•…äº‹é‡Œç¨‹ç¢‘
    function checkStoryMilestoneAchievement(character) {
      const newlyAchieved = character.storyMilestones.filter(
        milestone => character.affection >= milestone.affection && 
                    !character.storyMilestones.some(m => m.affection < milestone.affection && character.affection >= m.affection)
      );
      
      if (newlyAchieved.length > 0) {
        showNotification(`æ•…äº‹è¿›å±•ï¼š${character.name} - ${newlyAchieved[0].title}`, 'info');
      }
    }
    
    // æ ¹æ®å¯¹è¯æä¾›çº¿ç´¢
    function provideClueBasedOnDialogue(characterId, optionText, affectionChange) {
      const character = gameData.characters[characterId];
      
      // åªæœ‰å¥½æ„Ÿåº¦å¢åŠ è¾ƒå¤šæ—¶æ‰æä¾›çº¿ç´¢
      if (affectionChange <= 2) return;
      
      let clue = '';
      
      // æ ¹æ®ä¸åŒè§’è‰²å’Œé€‰é¡¹æä¾›ä¸åŒçº¿ç´¢
      if (characterId === 0 && (optionText.includes('ä¹¦ç±') || optionText.includes('å¤ç±') || optionText.includes('å›¾ä¹¦é¦†'))) {
        clue = `${character.name}æåˆ°äº†å…³äºå¤ç±çš„æ–°çº¿ç´¢`;
      } else if (characterId === 1 && (optionText.includes('è¿åŠ¨') || optionText.includes('è®­ç»ƒ') || optionText.includes('å¥–ç‰Œ'))) {
        clue = `${character.name}è°ˆèµ·äº†ä»–çš„è¿åŠ¨å‘˜ç”Ÿæ¶¯`;
      } else if (characterId === 2 && (optionText.includes('å…¬å¸') || optionText.includes('å®¶æ—') || optionText.includes('è”å§»'))) {
        clue = `${character.name}é€éœ²äº†ä¸€äº›å®¶æ—ä¼ä¸šçš„æƒ…å†µ`;
      } else if (characterId === 3 && (optionText.includes('å¦¹å¦¹') || optionText.includes('å¤±æ•£') || optionText.includes('æ¸¸ä¹å›­'))) {
        clue = `${character.name}å›å¿†èµ·äº†å’Œå¦¹å¦¹ç›¸å…³çš„å¾€äº‹`;
      } else if (characterId === 4 && (optionText.includes('éŸ³ä¹') || optionText.includes('è¡¨æ¼”') || optionText.includes('æ­Œæ›²'))) {
        clue = `${character.name}åˆ†äº«äº†ä»–çš„éŸ³ä¹åˆ›ä½œç†å¿µ`;
      }
      
      if (clue && !gameData.clues.some(c => c.characterId === characterId && c.text === clue)) {
        gameData.clues.push({
          characterId: characterId,
          text: clue,
          day: gameData.day
        });
        showNotification(`è·å¾—æ–°çº¿ç´¢ï¼š${clue}`, 'info');
      }
    }
    
    // è®°å½•äº’åŠ¨
    function recordInteraction(action, characterName, affectionChange) {
      gameData.interactions.push({
        day: gameData.day,
        characterName: characterName,
        action: action,
        affectionChange: affectionChange,
        timestamp: new Date().toLocaleString()
      });
    }
    
    // æ¸²æŸ“é€ç¤¼åŒºåŸŸ
    function renderGiftSection() {
      const character = gameData.characters[gameData.currentCharacter];
      const container = elements.sections.gift.querySelector('.grid');
      container.innerHTML = '';
      
      gameData.gifts.forEach(gift => {
        const isLiked = gift.likedBy.includes(character.id);
        const canAfford = gameData.money >= gift.price;
        
        const giftCard = document.createElement('div');
        giftCard.className = `gift-card ${!canAfford ? 'opacity-50 cursor-not-allowed' : ''}`;
        giftCard.innerHTML = `
          <div class="text-center">
            <div class="text-2xl mb-2">ğŸ</div>
            <h4 class="font-bold text-sm mb-1">${gift.name}</h4>
            <p class="text-xs text-gray-600 mb-2">${gift.price}å…ƒ</p>
            <div class="flex justify-center space-x-2 mb-2">
              <span class="text-xs px-2 py-1 rounded ${isLiked ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                ${isLiked ? 'å–œæ¬¢' : 'ä¸€èˆ¬'}
              </span>
              <span class="text-xs px-2 py-1 rounded bg-blue-100 text-blue-800">
                +${gift.affectionChange}å¥½æ„Ÿåº¦
              </span>
            </div>
            <button class="btn-primary text-xs w-full ${!canAfford ? 'opacity-50 cursor-not-allowed' : ''}" 
                    ${!canAfford ? 'disabled' : ''} 
                    onclick="giveGift(${gift.id})">
              ${canAfford ? 'èµ é€' : 'ä½™é¢ä¸è¶³'}
            </button>
          </div>
        `;
        container.appendChild(giftCard);
      });
    }
    
    // èµ é€ç¤¼ç‰©
    function giveGift(giftId) {
      const gift = gameData.gifts[giftId];
      const character = gameData.characters[gameData.currentCharacter];
      
      if (gameData.money >= gift.price) {
        // æ‰£é™¤é‡‘é’±
        gameData.money -= gift.price;
        
        // è®¡ç®—å¥½æ„Ÿåº¦å˜åŒ–ï¼ˆè€ƒè™‘æ˜¯å¦å–œæ¬¢å’Œçº¢æ¶¦æ¨¡å¼ï¼‰
        let affectionChange = gift.affectionChange;
        const isLiked = gift.likedBy.includes(character.id);
        if (isLiked) affectionChange *= 1.5;
        
        if (gameData.blushMode.active && gameData.blushMode.characterId === gameData.currentCharacter) {
          affectionChange *= 2;
        }
        
        // æ›´æ–°å¥½æ„Ÿåº¦
        character.affection += Math.floor(affectionChange);
        character.affection = Math.max(0, Math.min(100, character.affection));
        
        // æ›´æ–°å¿ƒæƒ…å€¼
        character.mood += 5;
        character.mood = Math.min(100, character.mood);
        
        // è®°å½•äº’åŠ¨
        recordInteraction(`èµ é€äº†${gift.name}`, character.name, Math.floor(affectionChange));
        
        // æ˜¾ç¤ºåé¦ˆ
        showNotification(`${gift.reaction} è·å¾—${Math.floor(affectionChange)}å¥½æ„Ÿåº¦ï¼`, 'success');
        
        // å¢åŠ å¤©æ•°
        gameData.day++;
        
        // æ›´æ–°çº¢æ¶¦æ¨¡å¼
        updateBlushMode();
        
        // ç”Ÿæˆæ–°çš„æ¯æ—¥è¿åŠ¿
        generateDailyFortune();
        
        // ä¿å­˜å¹¶æ›´æ–°
        saveGame();
        updateUI();
        renderGiftSection();
      }
    }
    
    // æ¸²æŸ“æ‰“å·¥åŒºåŸŸ
    function renderWorkSection() {
      const container = elements.sections.work.querySelector('.grid');
      container.innerHTML = '';
      
      gameData.jobs.forEach(job => {
        const jobCard = document.createElement('div');
        jobCard.className = 'job-card';
        jobCard.innerHTML = `
          <div class="text-center">
            <div class="text-2xl mb-2">ğŸ’¼</div>
            <h4 class="font-bold text-sm mb-1">${job.name}</h4>
            <p class="text-xs text-gray-600 mb-2">${job.description}</p>
            <div class="flex justify-center space-x-2 mb-2">
              <span class="text-xs px-2 py-1 rounded bg-green-100 text-green-800">
                +${job.pay}å…ƒ
              </span>
              <span class="text-xs px-2 py-1 rounded bg-yellow-100 text-yellow-800">
                ${job.time}å¤©
              </span>
            </div>
            <button class="btn-secondary text-xs w-full" onclick="doWork(${job.id})">
              å¼€å§‹å·¥ä½œ
            </button>
          </div>
        `;
        container.appendChild(jobCard);
      });
    }
    
    // æ‰“å·¥
    function doWork(jobId) {
      const job = gameData.jobs[jobId];
      
      // å¢åŠ é‡‘é’±
      gameData.money += job.pay;
      
      // å¢åŠ å¤©æ•°
      gameData.day += job.time;
      
      // æ›´æ–°å½“å‰è§’è‰²çš„å¿ƒæƒ…å€¼ï¼ˆå·¥ä½œä¼šè®©å¿ƒæƒ…ä¸‹é™ï¼‰
      if (gameData.currentCharacter !== null) {
        const character = gameData.characters[gameData.currentCharacter];
        character.mood -= 5;
        character.mood = Math.max(0, character.mood);
      }
      
      // è®°å½•äº’åŠ¨
      if (gameData.currentCharacter !== null) {
        const character = gameData.characters[gameData.currentCharacter];
        recordInteraction(`å®Œæˆäº†${job.name}å·¥ä½œ`, character.name, 0);
      }
      
      // æ˜¾ç¤ºåé¦ˆ
      showNotification(`å·¥ä½œå®Œæˆï¼è·å¾—${job.pay}å…ƒï¼ŒèŠ±è´¹${job.time}å¤©ã€‚`, 'success');
      
      // æ›´æ–°çº¢æ¶¦æ¨¡å¼
      updateBlushMode();
      
      // ç”Ÿæˆæ–°çš„æ¯æ—¥è¿åŠ¿
      generateDailyFortune();
      
      // ä¿å­˜å¹¶æ›´æ–°
      saveGame();
      updateUI();
      renderWorkSection();
    }
    
    // æ¸²æŸ“çº¦ä¼šåŒºåŸŸ
    function renderDateSection() {
      const character = gameData.characters[gameData.currentCharacter];
      const container = elements.sections.date.querySelector('.grid');
      container.innerHTML = '';
      
      gameData.dates.forEach(date => {
        const isLiked = date.likedBy.includes(character.id);
        const canAfford = gameData.money >= date.price;
        const meetsRequirement = !date.requiresAffection || character.affection >= date.requiresAffection;
        
        const dateCard = document.createElement('div');
        dateCard.className = `job-card ${!canAfford || !meetsRequirement ? 'opacity-50 cursor-not-allowed' : ''}`;
        dateCard.innerHTML = `
          <div class="text-center">
            <div class="text-2xl mb-2">${getDateEmoji(date.id)}</div>
            <h4 class="font-bold text-sm mb-1">${date.name}</h4>
            <p class="text-xs text-gray-600 mb-2">${date.description}</p>
            <div class="flex justify-center space-x-2 mb-2">
              <span class="text-xs px-2 py-1 rounded ${isLiked ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'}">
                ${isLiked ? 'å–œæ¬¢' : 'ä¸€èˆ¬'}
              </span>
              <span class="text-xs px-2 py-1 rounded bg-red-100 text-red-800">
                ${date.price}å…ƒ
              </span>
              ${date.specialEffect ? `<span class="text-xs px-2 py-1 rounded bg-pink-100 text-pink-800">ç‰¹æ®Šæ•ˆæœ</span>` : ''}
            </div>
            ${!meetsRequirement ? `<p class="text-xs text-red-500 mb-2">éœ€è¦å¥½æ„Ÿåº¦${date.requiresAffection}</p>` : ''}
            <button class="btn-primary text-xs w-full ${!canAfford || !meetsRequirement ? 'opacity-50 cursor-not-allowed' : ''}" 
                    ${!canAfford || !meetsRequirement ? 'disabled' : ''} 
                    onclick="goOnDate(${date.id})">
              ${canAfford && meetsRequirement ? 'å¼€å§‹çº¦ä¼š' : (meetsRequirement ? 'ä½™é¢ä¸è¶³' : 'æ¡ä»¶ä¸è¶³')}
            </button>
          </div>
        `;
        container.appendChild(dateCard);
      });
    }
    
    // è·å–çº¦ä¼šåœ°ç‚¹å¯¹åº”çš„emoji
    function getDateEmoji(dateId) {
      const emojis = ['ğŸ¬', 'ğŸŒ³', 'ğŸ‹ï¸', 'ğŸ¨', 'ğŸµ', 'ğŸ½ï¸', 'ğŸ¨'];
      return emojis[dateId] || 'â¤ï¸';
    }
    
    // çº¦ä¼š
    function goOnDate(dateId) {
      const date = gameData.dates[dateId];
      const character = gameData.characters[gameData.currentCharacter];
      
      if (gameData.money >= date.price && (!date.requiresAffection || character.affection >= date.requiresAffection)) {
        // æ‰£é™¤é‡‘é’±
        gameData.money -= date.price;
        
        // è®¡ç®—å¥½æ„Ÿåº¦å˜åŒ–ï¼ˆè€ƒè™‘æ˜¯å¦å–œæ¬¢å’Œçº¢æ¶¦æ¨¡å¼ï¼‰
        const isLiked = date.likedBy.includes(character.id);
        let affectionChange = isLiked ? 8 : 4;
        
        if (gameData.blushMode.active && gameData.blushMode.characterId === gameData.currentCharacter) {
          affectionChange *= 2;
        }
        
        // æ›´æ–°å¥½æ„Ÿåº¦
        character.affection += affectionChange;
        character.affection = Math.max(0, Math.min(100, character.affection));
        
        // æ›´æ–°å¿ƒæƒ…å€¼
        character.mood += 10;
        character.mood = Math.min(100, character.mood);
        
        // å¤„ç†ç‰¹æ®Šæ•ˆæœ
        if (date.specialEffect === 'blushMode') {
          gameData.blushMode = {
            active: true,
            daysRemaining: 3,
            characterId: gameData.currentCharacter
          };
          showNotification('è§¦å‘ç‰¹æ®Šæ•ˆæœï¼šçº¢æ¶¦æ¨¡å¼ï¼æ¥ä¸‹æ¥3å¤©å¥½æ„Ÿåº¦ç¿»å€ï¼', 'special');
        }
        
        // è®°å½•äº’åŠ¨
        recordInteraction(`å’Œ${character.name}åœ¨${date.name}çº¦ä¼š`, character.name, affectionChange);
        
        // æ˜¾ç¤ºåé¦ˆ
        const reaction = isLiked ? date.reactions.like : date.reactions.dislike;
        showNotification(`çº¦ä¼šç»“æŸï¼${reaction} è·å¾—${affectionChange}å¥½æ„Ÿåº¦ï¼`, 'success');
        
        // å¢åŠ å¤©æ•°
        gameData.day += date.time;
        
        // æ›´æ–°çº¢æ¶¦æ¨¡å¼
        updateBlushMode();
        
        // ç”Ÿæˆæ–°çš„æ¯æ—¥è¿åŠ¿
        generateDailyFortune();
        
        // ä¿å­˜å¹¶æ›´æ–°
        saveGame();
        updateUI();
        renderDateSection();
      }
    }
    
    // æ¸²æŸ“æ¢è£…åŒºåŸŸ
    function renderCostumeSection() {
      const character = gameData.characters[gameData.currentCharacter];
      const container = elements.ui.costumeContainer;
      container.innerHTML = '';
      
      character.costumes.forEach(costume => {
        const isUnlocked = costume.unlocked;
        const isSelected = character.currentCostume === costume.id;
        
        const costumeCard = document.createElement('div');
        costumeCard.className = `costume-card ${!isUnlocked ? 'costume-locked' : ''} ${isSelected ? 'border-primary bg-primary/5' : ''}`;
        costumeCard.innerHTML = `
          <div class="text-center">
            <img src="${costume.image}" alt="${costume.name}" class="w-full h-20 object-cover rounded mb-2">
            <h4 class="font-bold text-xs mb-1">${costume.name}</h4>
            ${!isUnlocked ? `<p class="text-xs text-gray-500">å¥½æ„Ÿåº¦${costume.requirement}è§£é”</p>` : ''}
            ${isUnlocked && !isSelected ? `<button class="btn-primary text-xs w-full mt-2" onclick="changeCostume(${costume.id})">é€‰æ‹©</button>` : ''}
            ${isSelected ? `<span class="text-xs px-2 py-1 rounded bg-primary text-white">å·²é€‰æ‹©</span>` : ''}
          </div>
        `;
        container.appendChild(costumeCard);
      });
    }
    
    // æ›´æ¢æœè£…
    function changeCostume(costumeId) {
      const character = gameData.characters[gameData.currentCharacter];
      const costume = character.costumes[costumeId];
      
      if (costume.unlocked) {
        character.currentCostume = costumeId;
        elements.character.detailImage.src = costume.image;
        
        showNotification(`å·²æ›´æ¢ä¸º${costume.name}`, 'success');
        
        // ä¿å­˜æ¸¸æˆ
        saveGame();
        renderCostumeSection();
      }
    }
    
    // æ›´æ–°æ—¥è®°
    function updateDiary() {
      // æ›´æ–°çº¿ç´¢æ”¶é›†
      if (gameData.clues.length === 0) {
        elements.ui.diaryClues.innerHTML = '<p class="text-gray-500">ä½ è¿˜æ²¡æœ‰æ”¶é›†åˆ°ä»»ä½•çº¿ç´¢...</p>';
      } else {
        elements.ui.diaryClues.innerHTML = gameData.clues.map(clue => `
          <div class="mb-2 p-2 bg-white rounded">
            <div class="flex justify-between items-center mb-1">
              <span class="font-bold text-sm">${gameData.characters[clue.characterId].name}</span>
              <span class="text-xs text-gray-500">ç¬¬${clue.day}å¤©</span>
            </div>
            <p class="text-sm">${clue.text}</p>
          </div>
        `).join('');
      }
      
      // æ›´æ–°äº’åŠ¨è®°å½•
      if (gameData.interactions.length === 0) {
        elements.ui.diaryInteractions.innerHTML = '<p class="text-gray-500">ä½ è¿˜æ²¡æœ‰ä¸ä»»ä½•äººäº’åŠ¨...</p>';
      } else {
        elements.ui.diaryInteractions.innerHTML = gameData.interactions.slice(-10).reverse().map(interaction => `
          <div class="mb-2 p-2 bg-white rounded">
            <div class="flex justify-between items-center mb-1">
              <span class="font-bold text-sm">${interaction.characterName}</span>
              <span class="text-xs text-gray-500">ç¬¬${interaction.day}å¤©</span>
            </div>
            <p class="text-sm">${interaction.action}</p>
            ${interaction.affectionChange !== 0 ? `<span class="text-xs px-2 py-1 rounded ${interaction.affectionChange > 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}">${interaction.affectionChange > 0 ? '+' : ''}${interaction.affectionChange}å¥½æ„Ÿåº¦</span>` : ''}
          </div>
        `).join('');
      }
    }
    
    // æ›´æ–°çº¢æ¶¦æ¨¡å¼
    function updateBlushMode() {
      if (gameData.blushMode.active) {
        gameData.blushMode.daysRemaining--;
        if (gameData.blushMode.daysRemaining <= 0) {
          gameData.blushMode.active = false;
          showNotification('çº¢æ¶¦æ¨¡å¼ç»“æŸï¼', 'info');
        }
      }
    }
    
    // è§¦å‘éšæœºäº‹ä»¶
    function triggerRandomEvent() {
      const event = gameData.events[Math.floor(Math.random() * gameData.events.length)];
      
      if (event.effect.moodChange) {
        if (gameData.currentCharacter !== null) {
          const character = gameData.characters[gameData.currentCharacter];
          character.mood += event.effect.moodChange;
          character.mood = Math.max(0, Math.min(100, character.mood));
        }
      }
      
      if (event.effect.affectionChange) {
        if (gameData.currentCharacter !== null) {
          const character = gameData.characters[gameData.currentCharacter];
          character.affection += event.effect.affectionChange;
          character.affection = Math.max(0, Math.min(100, character.affection));
        }
      }
      
      if (event.effect.moneyChange) {
        gameData.money += event.effect.moneyChange;
      }
      
      showNotification(`éšæœºäº‹ä»¶ï¼š${event.description}`, 'event');
    }
    
    // ç”Ÿæˆæ¯æ—¥è¿åŠ¿
    function generateDailyFortune() {
      const fortunes = [
        { emoji: 'ğŸŒŸ', text: 'ä»Šæ—¥é€‚åˆä¸å¿ƒä»ªå¯¹è±¡çº¦ä¼šï¼ŒæˆåŠŸç‡ä¼šå¤§å¤§æå‡ï¼' },
        { emoji: 'ğŸ’', text: 'èµ é€ç¤¼ç‰©ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„æ•ˆæœï¼Œè¯•è¯•çœ‹å§ï¼' },
        { emoji: 'ğŸµ', text: 'ä»Šå¤©çš„éŸ³ä¹ç‰¹åˆ«åŠ¨å¬ï¼Œå¿ƒæƒ…ä¹Ÿä¼šå˜å¾—å¾ˆå¥½ã€‚' },
        { emoji: 'ğŸ“š', text: 'é™ä¸‹å¿ƒæ¥é˜…è¯»ï¼Œå¯èƒ½ä¼šå‘ç°é‡è¦çš„çº¿ç´¢ã€‚' },
        { emoji: 'ğŸƒ', text: 'é€‚å½“çš„è¿åŠ¨èƒ½è®©å¿ƒæƒ…å˜å¥½ï¼Œä¹Ÿèƒ½ç»™å¯¹æ–¹ç•™ä¸‹å¥½å°è±¡ã€‚' },
        { emoji: 'ğŸ€', text: 'ä»Šå¤©è¿æ°”ä¸é”™ï¼Œåšä»€ä¹ˆäº‹æƒ…éƒ½ä¼šå¾ˆé¡ºåˆ©ã€‚' },
        { emoji: 'ğŸŒ§ï¸', text: 'å¤©æ°”ä¸å¤ªå¥½ï¼Œå¯èƒ½ä¼šå½±å“å¿ƒæƒ…ï¼Œæ³¨æ„è°ƒèŠ‚ã€‚' },
        { emoji: 'ğŸ', text: 'æ„å¤–çš„æƒŠå–œç­‰ç€ä½ ï¼Œä¿æŒæœŸå¾…çš„å¿ƒæƒ…å§ï¼' }
      ];
      
      const fortune = fortunes[Math.floor(Math.random() * fortunes.length)];
      const fortuneElement = document.getElementById('daily-fortune');
      
      if (fortuneElement) {
        fortuneElement.innerHTML = `
          <div class="text-2xl mb-2">${fortune.emoji}</div>
          <p class="text-sm text-gray-600">${fortune.text}</p>
        `;
      }
    }
    
    // æ›´æ–°åå®«å¾½ç« 
    function updateHaremBadges() {
      gameData.harem.forEach(characterId => {
        const badge = document.querySelector(`.harem-badge[data-character="${characterId}"]`);
        if (badge) {
          badge.classList.remove('hidden');
        }
      });
    }
    
    // æ›´æ–°åå®«æ˜¾ç¤º
    function updateHaremDisplay() {
      if (gameData.harem.length > 0) {
        elements.ui.haremSection.classList.remove('hidden');
        elements.ui.haremContainer.innerHTML = '';
        
        gameData.harem.forEach(characterId => {
          const character = gameData.characters[characterId];
          const haremCard = document.createElement('div');
          haremCard.className = 'bg-white rounded-lg shadow p-3 flex items-center space-x-3';
          haremCard.innerHTML = `
            <img src="${character.haremImage}" alt="${character.name}" class="w-12 h-12 rounded-full object-cover">
            <div>
              <h4 class="font-bold text-sm">${character.name}</h4>
              <p class="text-xs text-gray-600">${character.title}</p>
            </div>
          `;
          elements.ui.haremContainer.appendChild(haremCard);
        });
      } else {
        elements.ui.haremSection.classList.add('hidden');
      }
    }
    
    // æ˜¾ç¤ºé€šçŸ¥
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      
      let bgColor = 'bg-blue-500';
      let icon = 'fa-info-circle';
      
      switch(type) {
        case 'success':
          bgColor = 'bg-green-500';
          icon = 'fa-check-circle';
          break;
        case 'error':
          bgColor = 'bg-red-500';
          icon = 'fa-exclamation-circle';
          break;
        case 'warning':
          bgColor = 'bg-yellow-500';
          icon = 'fa-exclamation-triangle';
          break;
        case 'special':
          bgColor = 'bg-purple-500';
          icon = 'fa-magic';
          break;
        case 'event':
          bgColor = 'bg-pink-500';
          icon = 'fa-star';
          break;
      }
      
      notification.className = `notification ${bgColor} text-white px-4 py-3 rounded-lg shadow-lg`;
      notification.innerHTML = `
        <div class="flex items-start">
          <i class="fa ${icon} mr-2 mt-1"></i>
          <div>
            <p class="font-bold">${type === 'success' ? 'æˆåŠŸ' : type === 'error' ? 'é”™è¯¯' : type === 'warning' ? 'è­¦å‘Š' : type === 'special' ? 'ç‰¹æ®Šæ•ˆæœ' : type === 'event' ? 'éšæœºäº‹ä»¶' : 'é€šçŸ¥'}</p>
            <p class="text-sm">${message}</p>
          </div>
        </div>
      `;
      
      elements.ui.notificationContainer.appendChild(notification);
      
      // æ˜¾ç¤ºé€šçŸ¥
      setTimeout(() => {
        notification.classList.add('show');
      }, 10);
      
      // 3ç§’åéšè—
      setTimeout(() => {
        notification.classList.remove('show');
        setTimeout(() => {
          if (notification.parentNode) {
            notification.parentNode.removeChild(notification);
          }
        }, 300);
      }, 3000);
    }
    
    // å…¨å±€å‡½æ•°ï¼ˆä¾›HTMLè°ƒç”¨ï¼‰
    window.giveGift = giveGift;
    window.doWork = doWork;
    window.goOnDate = goOnDate;
    window.changeCostume = changeCostume;
    
    // åˆå§‹åŒ–æ¸¸æˆ
    document.addEventListener('DOMContentLoaded', initGame);
  </script>
</body>
</html>
